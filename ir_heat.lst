   1               		.file	"ir_heat.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   9               		.text
  10               	.Ltext0:
  86               	.global	interval
  87               		.data
  90               	interval:
  91 0000 F4        		.byte	-12
  92               	.global	off_counter
  93               	.global	off_counter
  94               		.section .bss
  97               	off_counter:
  98 0000 00        		.skip 1,0
  99               	.global	t_la_threshold_up
 100               		.data
 103               	t_la_threshold_up:
 104 0001 2C01      		.word	300
 105               	.global	t_abs_threshold_up
 108               	t_abs_threshold_up:
 109 0003 0E01      		.word	270
 110               	.global	t_la_threshold_down
 113               	t_la_threshold_down:
 114 0005 FA00      		.word	250
 115               	.global	t_abs_threshold_down
 118               	t_abs_threshold_down:
 119 0007 FA00      		.word	250
 120               		.text
 122               	.global	__vector_9
 124               	__vector_9:
   1:ir_heat.c     **** // ***********************************************************
   2:ir_heat.c     **** // Project:
   3:ir_heat.c     **** // Author:
   4:ir_heat.c     **** // Module description:
   5:ir_heat.c     **** // ***********************************************************
   6:ir_heat.c     **** 
   7:ir_heat.c     **** #ifndef F_CPU
   8:ir_heat.c     **** #define F_CPU 1000000UL
   9:ir_heat.c     **** #endif
  10:ir_heat.c     **** 
  11:ir_heat.c     **** #include <avr\io.h>              // Most basic include files
  12:ir_heat.c     **** #include <avr\interrupt.h>       // Add the necessary ones
  13:ir_heat.c     **** #include <avr\signal.h>          // here
  14:ir_heat.c     **** #include <avr\wdt.h>
  15:ir_heat.c     **** 
  16:ir_heat.c     **** #include <stdio.h>
  17:ir_heat.c     **** #include <string.h>
  18:ir_heat.c     **** #include <stdlib.h>
  19:ir_heat.c     **** 
  20:ir_heat.c     **** #include "i2c_mstr.h"
  21:ir_heat.c     **** #include "ir_heat.h"
  22:ir_heat.c     **** 
  23:ir_heat.c     **** #define 	MLX90614_WRITE	(0x5A<<1)
  24:ir_heat.c     **** #define 	MLX90614_READ	(MLX90614_WRITE+1)
  25:ir_heat.c     **** #define	ADR_T_A			0x06
  26:ir_heat.c     **** #define	ADR_T_OBJ1		0x07
  27:ir_heat.c     **** #define	ADR_T_OBJ2		0x08
  28:ir_heat.c     **** 
  29:ir_heat.c     **** 
  30:ir_heat.c     **** #define __STDIO_FDEVOPEN_COMPAT_12						
  31:ir_heat.c     **** // Buffer sizes must be 2^n
  32:ir_heat.c     **** //
  33:ir_heat.c     **** #define TBUFSIZE	32
  34:ir_heat.c     **** #define RBUFSIZE	32
  35:ir_heat.c     **** 
  36:ir_heat.c     **** #define TMASK		(TBUFSIZE-1)
  37:ir_heat.c     **** #define RMASK		(RBUFSIZE-1)
  38:ir_heat.c     **** 
  39:ir_heat.c     **** #define FLASH_LED		PC3
  40:ir_heat.c     **** #define STATUS_LED1	PD4
  41:ir_heat.c     **** #define STATUS_LED2	PD3
  42:ir_heat.c     **** #define RELAIS			PB6
  43:ir_heat.c     **** #define BUZZER			PB7
  44:ir_heat.c     **** #define SWITCH			PD2
  45:ir_heat.c     **** 
  46:ir_heat.c     **** #define RELAIS_ON			PORTB |= (1<<RELAIS)
  47:ir_heat.c     **** #define RELAIS_OFF		PORTB &=~(1<<RELAIS)
  48:ir_heat.c     **** 
  49:ir_heat.c     **** #define BUZZER_ON			PORTB |= (1<<BUZZER)
  50:ir_heat.c     **** #define BUZZER_OFF		PORTB &=~(1<<BUZZER)
  51:ir_heat.c     **** 
  52:ir_heat.c     **** #define STATUS_LED1_ON	PORTD |= (1<<STATUS_LED1)
  53:ir_heat.c     **** #define STATUS_LED1_OFF	PORTD &=~(1<<STATUS_LED1)
  54:ir_heat.c     **** 
  55:ir_heat.c     **** #define FLASH_LED_ON		PORTC |= (1<<FLASH_LED)
  56:ir_heat.c     **** #define FLASH_LED_OFF	PORTC &=~(1<<FLASH_LED)
  57:ir_heat.c     **** 
  58:ir_heat.c     **** #define STATUS_LED2_ON	PORTD |= (1<<STATUS_LED2)
  59:ir_heat.c     **** #define STATUS_LED2_OFF	PORTD &=~(1<<STATUS_LED2)
  60:ir_heat.c     **** 
  61:ir_heat.c     **** #define OFF_COUNTER		5
  62:ir_heat.c     **** 
  63:ir_heat.c     **** #define TIMER1_STOP		TCCR1B = 0
  64:ir_heat.c     **** #define TIMER1_RUN		TCCR1B = (0<<CS12) | (1<<CS11) | (0<<CS10)
  65:ir_heat.c     **** 
  66:ir_heat.c     **** #define	MODE_OFF			0
  67:ir_heat.c     **** #define	MODE_ON			1
  68:ir_heat.c     **** #define	MODE_TEMP_PROT	3
  69:ir_heat.c     **** 
  70:ir_heat.c     **** // Define here the global static variables
  71:ir_heat.c     **** //
  72:ir_heat.c     **** volatile unsigned char tbuf[TBUFSIZE];  // TX buffer
  73:ir_heat.c     **** volatile unsigned char rbuf[RBUFSIZE];  // RX buffer
  74:ir_heat.c     **** 
  75:ir_heat.c     **** volatile unsigned char t_in;            // TX buffer in index
  76:ir_heat.c     **** volatile unsigned char t_out;           // TX buffer out index
  77:ir_heat.c     **** 
  78:ir_heat.c     **** volatile unsigned char r_in;            // RX buffer in index
  79:ir_heat.c     **** volatile unsigned char r_out;           // RX buffer out index
  80:ir_heat.c     **** 
  81:ir_heat.c     **** int8_t	interval = -12;
  82:ir_heat.c     **** int16_t 	t_array[6];
  83:ir_heat.c     **** uint8_t	off_counter = 0;
  84:ir_heat.c     **** uint8_t	mode;
  85:ir_heat.c     **** int16_t	slope2;
  86:ir_heat.c     **** 
  87:ir_heat.c     **** uint16_t	t_la_threshold_up 	=  300;
  88:ir_heat.c     **** uint16_t	t_abs_threshold_up 	=  270;
  89:ir_heat.c     **** uint16_t	t_la_threshold_down 	=  250;
  90:ir_heat.c     **** uint16_t	t_abs_threshold_down	=  250;
  91:ir_heat.c     **** 
  92:ir_heat.c     **** 
  93:ir_heat.c     **** 
  94:ir_heat.c     **** // Clock Timer
  95:ir_heat.c     **** SIGNAL(SIG_OVERFLOW2) {
 125               	M0:
 126               	.LFBB1:
 127               		push __zero_reg__
 128 0000 1F92      		push r0
 129 0002 0F92      		in r0,__SREG__
 130 0004 0FB6      		push r0
 131 0006 0F92      		clr __zero_reg__
 132 0008 1124      		push r24
 133 000a 8F93      		push r29
 134 000c DF93      		push r28
 135 000e CF93      		in r28,__SP_L__
 136 0010 CDB7      		in r29,__SP_H__
 137 0012 DEB7      	/* prologue: Signal */
 138               	/* frame size = 0 */
  96:ir_heat.c     **** 	interval++;
 140               	interval
 141               		subi r24,lo8(-(1))
 142 0014 8091 0000 		sts interval,r24
 143 0018 8F5F      	/* epilogue start */
 145               	.LM2:
  97:ir_heat.c     **** }
 146               	28
 147               		pop r29
 148 001e CF91      		pop r24
 149 0020 DF91      		pop r0
 150 0022 8F91      		out __SREG__,r0
 151 0024 0F90      		pop r0
 152 0026 0FBE      		pop __zero_reg__
 153 0028 0F90      		reti
 155 002c 1895      	.Lscope1:
 157               	.global	__vector_13
 159               	__vector_13:
 161               	.LM3:
  98:ir_heat.c     **** 
  99:ir_heat.c     **** SIGNAL(SIG_OVERFLOW1) {
 162               	zero_reg__
 163               		push r0
 164               		in r0,__SREG__
 165 002e 1F92      		push r0
 166 0030 0F92      		clr __zero_reg__
 167 0032 0FB6      		push r30
 168 0034 0F92      		push r31
 169 0036 1124      		push r29
 170 0038 EF93      		push r28
 171 003a FF93      		in r28,__SP_L__
 172 003c DF93      		in r29,__SP_H__
 173 003e CF93      	/* prologue: Signal */
 174 0040 CDB7      	/* frame size = 0 */
 176               	.LM4:
 177               		ldi r30,lo8(129)
 100:ir_heat.c     **** 	TIMER1_STOP;
 178               	)
 179               		st Z,__zero_reg__
 181 0046 F0E0      	.LM5:
 182 0048 1082      		ldi r30,lo8(133)
 101:ir_heat.c     **** 	TCNT1H = 0;
 183               	r31,hi8(133)
 184               		st Z,__zero_reg__
 186 004c F0E0      	.LM6:
 187 004e 1082      		ldi r30,lo8(132)
 102:ir_heat.c     **** 	TCNT1L = 0;
 188               	r31,hi8(132)
 189               		st Z,__zero_reg__
 190 0050 E4E8      	/* epilogue start */
 192 0054 1082      	.LM7:
 193               		pop r28
 103:ir_heat.c     **** }
 194               	29
 195               		pop r31
 196 0056 CF91      		pop r30
 197 0058 DF91      		pop r0
 198 005a FF91      		out __SREG__,r0
 199 005c EF91      		pop r0
 200 005e 0F90      		pop __zero_reg__
 201 0060 0FBE      		reti
 203 0064 1F90      	.Lscope2:
 204 0066 1895      		.lcomm c.1694,1
 206               	.global	__vector_16
 208               	__vector_16:
 210               	.LM8:
 211               	.LFBB3:
 104:ir_heat.c     **** 
 105:ir_heat.c     **** SIGNAL(SIG_OVERFLOW0) {
 212               	
 213               		push r0
 214               		in r0,__SREG__
 215 0068 1F92      		push r0
 216 006a 0F92      		clr __zero_reg__
 217 006c 0FB6      		push r18
 218 006e 0F92      		push r19
 219 0070 1124      		push r20
 220 0072 2F93      		push r21
 221 0074 3F93      		push r24
 222 0076 4F93      		push r25
 223 0078 5F93      		push r26
 224 007a 8F93      		push r27
 225 007c 9F93      		push r30
 226 007e AF93      		push r31
 227 0080 BF93      		push r29
 228 0082 EF93      		push r28
 229 0084 FF93      		push __tmp_reg__
 230 0086 DF93      		in r28,__SP_L__
 231 0088 CF93      		in r29,__SP_H__
 232 008a 0F92      	/* prologue: Signal */
 233 008c CDB7      	/* frame size = 1 */
 235               	.LM9:
 236               		std Y+1,__zero_reg__
 106:ir_heat.c     **** 	static uint8_t	c = 0;
 107:ir_heat.c     **** 	uint8_t slow=0;
 237               	LFBB3
 238               	.LM10:
 239 0090 1982      		lds r24,c.1694
 108:ir_heat.c     **** 	//if (off_counter < OFF_COUNTER-2) slow=1;
 109:ir_heat.c     **** 	c++;
 240               	bi r24,lo8(-(1))
 241               		sts c.1694,r24
 243 0096 8F5F      	.LM11:
 244 0098 8093 0000 		lds r24,mode
 110:ir_heat.c     **** 	if (mode==MODE_TEMP_PROT) {
 245               	r24,lo8(3)
 246               		brne .L6
 248 00a0 8330      	.LM12:
 249 00a2 01F4      		lds r24,c.1694
 111:ir_heat.c     **** 		if(c > (6<<slow)) {
 250               	r20,r24
 251               		ldi r21,lo8(0)
 252 00a4 8091 0000 		ldd r24,Y+1
 253 00a8 482F      		mov r18,r24
 254 00aa 50E0      		ldi r19,lo8(0)
 255 00ac 8981      		ldi r24,lo8(6)
 256 00ae 282F      		ldi r25,hi8(6)
 257 00b0 30E0      		mov r0,r18
 258 00b2 86E0      		rjmp 2f
 259 00b4 90E0      	1:	lsl r24
 260 00b6 022E      		rol r25
 261 00b8 00C0      	2:	dec r0
 262 00ba 880F      		brpl 1b
 263 00bc 991F      		cp r24,r20
 264 00be 0A94      		cpc r25,r21
 265 00c0 02F4      		brge .L6
 267 00c4 9507      	.LM13:
 268 00c6 04F4      		ldi r26,lo8(40)
 112:ir_heat.c     **** 			FLASH_LED_ON;
 269               	di r30,lo8(40)
 270               		ldi r31,hi8(40)
 271 00c8 A8E2      		ld r24,Z
 272 00ca B0E0      		ori r24,lo8(8)
 273 00cc E8E2      		st X,r24
 274 00ce F0E0      	.L6:
 276 00d2 8860      	.LM14:
 277 00d4 8C93      		lds r24,c.1694
 278               		mov r20,r24
 113:ir_heat.c     **** 		}
 114:ir_heat.c     **** 	}
 115:ir_heat.c     **** 	if(c > (10<<slow)) {
 279               	o8(0)
 280               		ldd r24,Y+1
 281 00d6 8091 0000 		mov r18,r24
 282 00da 482F      		ldi r19,lo8(0)
 283 00dc 50E0      		ldi r24,lo8(10)
 284 00de 8981      		ldi r25,hi8(10)
 285 00e0 282F      		mov r0,r18
 286 00e2 30E0      		rjmp 2f
 287 00e4 8AE0      	1:	lsl r24
 288 00e6 90E0      		rol r25
 289 00e8 022E      	2:	dec r0
 290 00ea 00C0      		brpl 1b
 291 00ec 880F      		cp r24,r20
 292 00ee 991F      		cpc r25,r21
 293 00f0 0A94      		brge .L8
 295 00f4 8417      	.LM15:
 296 00f6 9507      		sts c.1694,__zero_reg__
 116:ir_heat.c     **** 		c=0;
 298               	(40)
 299               		ldi r27,hi8(40)
 300 00fa 1092 0000 		ldi r30,lo8(40)
 117:ir_heat.c     **** 		FLASH_LED_OFF;
 301               	i r31,hi8(40)
 302               		ld r24,Z
 303 00fe A8E2      		andi r24,lo8(-9)
 304 0100 B0E0      		st X,r24
 305 0102 E8E2      	.L8:
 306 0104 F0E0      	/* epilogue start */
 308 0108 877F      	.LM17:
 309 010a 8C93      		pop __tmp_reg__
 310               		pop r28
 311               		pop r29
 118:ir_heat.c     **** 	}
 119:ir_heat.c     **** }
 312               	op r30
 313               		pop r27
 314 010c 0F90      		pop r26
 315 010e CF91      		pop r25
 316 0110 DF91      		pop r24
 317 0112 FF91      		pop r21
 318 0114 EF91      		pop r20
 319 0116 BF91      		pop r19
 320 0118 AF91      		pop r18
 321 011a 9F91      		pop r0
 322 011c 8F91      		out __SREG__,r0
 323 011e 5F91      		pop r0
 324 0120 4F91      		pop __zero_reg__
 325 0122 3F91      		reti
 331 012e 1895      	.Lscope3:
 332               		.data
 335               	last_interval.1727:
 336               		.byte	-1
 337               		.lcomm running.1726,1
 338               	.LC0:
 339               		.string	"In"
 340               	.LC1:
 341               		.string	" %i "
 342 0009 FF        	.LC2:
 343               		.string	"Out"
 344               	.LC3:
 345 000a 496E 00   		.string	"Exit"
 346               		.text
 348               	.global	__vector_1
 350               	__vector_1:
 352               	.LM18:
 353               	.LFBB4:
 354               		push __zero_reg__
 355               		push r0
 356               		in r0,__SREG__
 120:ir_heat.c     **** 
 121:ir_heat.c     **** 
 122:ir_heat.c     **** SIGNAL(SIG_INTERRUPT0) {
 357               	9
 358               		push r20
 359               		push r21
 360 0130 1F92      		push r22
 361 0132 0F92      		push r23
 362 0134 0FB6      		push r24
 363 0136 0F92      		push r25
 364 0138 1124      		push r26
 365 013a 2F93      		push r27
 366 013c 3F93      		push r30
 367 013e 4F93      		push r31
 368 0140 5F93      		push r29
 369 0142 6F93      		push r28
 370 0144 7F93      		rcall .
 371 0146 8F93      		push __tmp_reg__
 372 0148 9F93      		in r28,__SP_L__
 373 014a AF93      		in r29,__SP_H__
 374 014c BF93      	/* prologue: Signal */
 375 014e EF93      	/* frame size = 3 */
 377 0152 DF93      	.LM19:
 378 0154 CF93      		ldi r30,lo8(133)
 379 0156 00D0      		ldi r31,hi8(133)
 380 0158 0F92      		ld r25,Z
 381 015a CDB7      		lds r24,running.1726
 382 015c DEB7      		or r25,r24
 383               		ldi r30,lo8(132)
 384               		ldi r31,hi8(132)
 123:ir_heat.c     **** 	static uint8_t running = 0;
 124:ir_heat.c     **** 	static uint8_t last_interval = 0xff;
 125:ir_heat.c     **** 	
 126:ir_heat.c     **** 	if(running | TCNT1H | TCNT1L){
 385               	24
 386               		breq .L10
 388 0160 F0E0      	.LM20:
 389 0162 9081      		ldi r24,lo8(88)
 390 0164 8091 0000 		ldi r25,hi8(88)
 391 0168 982B      		call putchar
 392 016a E4E8      		rjmp .L20
 393 016c F0E0      	.L10:
 395 0170 892B      	.LM21:
 396 0172 8823      		ldi r24,lo8(1)
 397 0174 01F0      		sts running.1726,r24
 127:ir_heat.c     **** 		printf("X");
 398               	133,.LM22-.LFBB4
 399               	.LM22:
 400 0176 88E5      		std Y+1,__zero_reg__
 402 017a 0E94 0000 	.LM23:
 403 017e 00C0      		ldi r30,lo8(61)
 404               		ldi r31,hi8(61)
 128:ir_heat.c     **** 		return;
 129:ir_heat.c     **** 	}
 130:ir_heat.c     **** 	running = 1;
 405               	_zero_reg__
 407 0180 81E0      	.LM24:
 408 0182 8093 0000 	/* #APP */
 131:ir_heat.c     **** 	
 132:ir_heat.c     **** 	uint16_t i;
 133:ir_heat.c     **** 	uint8_t c=0;
 409               	135 "ir_heat.c" 1
 410               		sei
 411 0186 1982      	 ;  0 "" 2
 134:ir_heat.c     **** 	EIMSK = 0;
 412               	tabn	68,0,136,.LM25-.LFBB4
 413               	.LM25:
 414 0188 EDE3      	/* #NOAPP */
 415 018a F0E0      		rcall .
 416 018c 1082      		in r30,__SP_L__
 135:ir_heat.c     **** 	sei();
 417               	31,__SP_H__
 418               		adiw r30,1
 419               		ldi r24,lo8(.LC0)
 420               		ldi r25,hi8(.LC0)
 421 018e 7894      		std Z+1,r25
 422               		st Z,r24
 136:ir_heat.c     **** 	printf("In");
 423               	printf
 424               		pop __tmp_reg__
 425               		pop __tmp_reg__
 427 0192 EDB7      	.LM26:
 428 0194 FEB7      		std Y+3,__zero_reg__
 429 0196 3196      		std Y+2,__zero_reg__
 430 0198 80E0      		rjmp .L12
 431 019a 90E0      	.L14:
 432 019c 9183      		ldi r30,lo8(41)
 433 019e 8083      		ldi r31,hi8(41)
 434 01a0 0E94 0000 		ld r24,Z
 435 01a4 0F90      		mov r24,r24
 436 01a6 0F90      		ldi r25,lo8(0)
 137:ir_heat.c     **** 	for(i=0;i<2000;i++) if((PIND & (1<<SWITCH))) c++;
 437               	4)
 438               		andi r25,hi8(4)
 439 01a8 1B82      		sbiw r24,0
 440 01aa 1A82      		breq .L13
 441 01ac 00C0      		ldd r24,Y+1
 442               		subi r24,lo8(-(1))
 443 01ae E9E2      		std Y+1,r24
 444 01b0 F0E0      	.L13:
 445 01b2 8081      		ldd r24,Y+2
 446 01b4 882F      		ldd r25,Y+3
 447 01b6 90E0      		adiw r24,1
 448 01b8 8470      		std Y+3,r25
 449 01ba 9070      		std Y+2,r24
 450 01bc 0097      	.L12:
 451 01be 01F0      		ldd r24,Y+2
 452 01c0 8981      		ldd r25,Y+3
 453 01c2 8F5F      		ldi r18,hi8(2000)
 454 01c4 8983      		cpi r24,lo8(2000)
 455               		cpc r25,r18
 456 01c6 8A81      		brlo .L14
 458 01ca 0196      	.LM27:
 459 01cc 9B83      		ldd r24,Y+1
 460 01ce 8A83      		mov r18,r24
 461               		ldi r19,lo8(0)
 462 01d0 8A81      		rcall .
 463 01d2 9B81      		rcall .
 464 01d4 27E0      		in r30,__SP_L__
 465 01d6 803D      		in r31,__SP_H__
 466 01d8 9207      		adiw r30,1
 467 01da 00F0      		ldi r24,lo8(.LC1)
 138:ir_heat.c     **** 	printf(" %i ", c);
 468               	
 469               		st Z,r24
 470 01dc 8981      		std Z+3,r19
 471 01de 282F      		std Z+2,r18
 472 01e0 30E0      		call printf
 473 01e2 00D0      		pop __tmp_reg__
 474 01e4 00D0      		pop __tmp_reg__
 475 01e6 EDB7      		pop __tmp_reg__
 476 01e8 FEB7      		pop __tmp_reg__
 478 01ec 80E0      	.LM28:
 479 01ee 90E0      		ldd r24,Y+1
 480 01f0 9183      		cpi r24,lo8(100)
 481 01f2 8083      		brsh .L15
 483 01f6 2283      	.LM29:
 484 01f8 0E94 0000 		ldi r30,lo8(132)
 485 01fc 0F90      		ldi r31,hi8(132)
 486 01fe 0F90      		ldi r24,lo8(1)
 487 0200 0F90      		st Z,r24
 139:ir_heat.c     **** 
 140:ir_heat.c     **** 	if(c < 100) {
 489               	129)
 490               		ldi r31,hi8(129)
 491 0204 8981      		ldi r24,lo8(2)
 492 0206 8436      		st Z,r24
 141:ir_heat.c     **** 		TCNT1L = 1;
 494               	:
 495               		lds r24,mode
 496 020a E4E8      		mov r24,r24
 497 020c F0E0      		ldi r25,lo8(0)
 498 020e 81E0      		sbiw r24,0
 499 0210 8083      		brne .L21
 142:ir_heat.c     **** 		TIMER1_RUN;
 501               	.LM32:
 502 0212 E1E8      		lds r24,off_counter
 503 0214 F0E0      		tst r24
 504 0216 82E0      		breq .L18
 505 0218 8083      		ldi r24,lo8(3)
 143:ir_heat.c     **** 		switch(mode) {
 506               	ode,r24
 507               		rjmp .L15
 508 021a 8091 0000 	.L18:
 510 0220 90E0      	.LM33:
 511 0222 0097      		ldi r24,lo8(1)
 512 0224 01F4      		sts mode,r24
 513               		rjmp .L15
 144:ir_heat.c     **** 		case MODE_OFF:
 145:ir_heat.c     **** 			if(off_counter) mode = MODE_TEMP_PROT;
 514               	stabn	68,0,151,.LM34-.LFBB4
 515               	.LM34:
 516 0226 8091 0000 		sts mode,__zero_reg__
 517 022a 8823      	.L15:
 519 022e 83E0      	.LM35:
 520 0230 8093 0000 		ldi r24,lo8(.LC2)
 521 0234 00C0      		ldi r25,hi8(.LC2)
 522               		call puts
 146:ir_heat.c     **** 			else mode = MODE_ON;
 523               	8,0,155,.LM36-.LFBB4
 524               	.LM36:
 525 0236 81E0      		ldi r30,lo8(60)
 526 0238 8093 0000 		ldi r31,hi8(60)
 527 023c 00C0      		ldi r24,lo8(1)
 528               		st Z,r24
 147:ir_heat.c     **** 			break;
 148:ir_heat.c     **** 		case MODE_ON:
 149:ir_heat.c     **** 		case MODE_TEMP_PROT:
 150:ir_heat.c     **** 		default:
 151:ir_heat.c     **** 			mode = MODE_OFF;
 529               	n	68,0,156,.LM37-.LFBB4
 530               	.LM37:
 531 023e 1092 0000 		ldi r30,lo8(61)
 532               		ldi r31,hi8(61)
 152:ir_heat.c     **** 		}
 153:ir_heat.c     **** 	}
 154:ir_heat.c     **** 	printf("Out\n");
 533               	 r24,lo8(1)
 534               		st Z,r24
 536 0244 90E0      	.LM38:
 537 0246 0E94 0000 		sts running.1726,__zero_reg__
 155:ir_heat.c     **** 	EIFR = (1<<INTF0);
 538               	bn	68,0,158,.LM39-.LFBB4
 539               	.LM39:
 540 024a ECE3      		ldi r24,lo8(.LC3)
 541 024c F0E0      		ldi r25,hi8(.LC3)
 542 024e 81E0      		call puts
 543 0250 8083      	.L20:
 156:ir_heat.c     **** 	EIMSK = (1<<INT0);
 544               	logue start */
 546 0252 EDE3      	.LM40:
 547 0254 F0E0      		pop __tmp_reg__
 548 0256 81E0      		pop __tmp_reg__
 549 0258 8083      		pop __tmp_reg__
 157:ir_heat.c     **** 	running = 0;
 550               	28
 551               		pop r29
 552 025a 1092 0000 		pop r31
 158:ir_heat.c     **** 	printf("Exit\n");
 553               	p r30
 554               		pop r27
 555 025e 80E0      		pop r26
 556 0260 90E0      		pop r25
 557 0262 0E94 0000 		pop r24
 558               		pop r23
 559               		pop r22
 159:ir_heat.c     **** }
 560               	1
 561               		pop r20
 562 0266 0F90      		pop r19
 563 0268 0F90      		pop r18
 564 026a 0F90      		pop r0
 565 026c CF91      		out __SREG__,r0
 566 026e DF91      		pop r0
 567 0270 FF91      		pop __zero_reg__
 568 0272 EF91      		reti
 576 0282 4F91      	.Lscope4:
 578 0286 2F91      	.global	__vector_18
 580 028a 0FBE      	__vector_18:
 582 028e 1F90      	.LM41:
 583 0290 1895      	.LFBB5:
 584               		push __zero_reg__
 585               		push r0
 586               		in r0,__SREG__
 587               		push r0
 588               		clr __zero_reg__
 589               		push r24
 590               		push r25
 591               		push r30
 592               		push r31
 593               		push r29
 594               		push r28
 595               		push __tmp_reg__
 160:ir_heat.c     **** 
 161:ir_heat.c     **** 
 162:ir_heat.c     **** SIGNAL(SIG_USART_RECV) {
 596               	 prologue: Signal */
 597               	/* frame size = 1 */
 599 0292 1F92      	.LM42:
 600 0294 0F92      		ldi r30,lo8(198)
 601 0296 0FB6      		ldi r31,hi8(198)
 602 0298 0F92      		ld r24,Z
 603 029a 1124      		std Y+1,r24
 605 029e 9F93      	.LM43:
 606 02a0 EF93      		lds r24,r_in
 607 02a2 FF93      		mov r24,r24
 608 02a4 DF93      		ldi r25,lo8(0)
 609 02a6 CF93      		andi r24,lo8(31)
 610 02a8 0F92      		andi r25,hi8(31)
 611 02aa CDB7      		movw r30,r24
 612 02ac DEB7      		subi r30,lo8(-(rbuf))
 613               		sbci r31,hi8(-(rbuf))
 614               		ldd r24,Y+1
 163:ir_heat.c     **** //******************
 164:ir_heat.c     **** // RX interrupt handler
 165:ir_heat.c     **** //
 166:ir_heat.c     **** 	char c;	
 167:ir_heat.c     **** 	c = UDR0;							// Get received char
 615               	8,0,169,.LM44-.LFBB5
 616               	.LM44:
 617 02ae E6EC      		lds r24,r_in
 618 02b0 F0E0      		subi r24,lo8(-(1))
 619 02b2 8081      		sts r_in,r24
 620 02b4 8983      	/* epilogue start */
 168:ir_heat.c     **** 	rbuf[r_in & RMASK] = c;
 621               	n	68,0,170,.LM45-.LFBB5
 622               	.LM45:
 623 02b6 8091 0000 		pop __tmp_reg__
 624 02ba 882F      		pop r28
 625 02bc 90E0      		pop r29
 626 02be 8F71      		pop r31
 627 02c0 9070      		pop r30
 628 02c2 FC01      		pop r25
 629 02c4 E050      		pop r24
 630 02c6 F040      		pop r0
 631 02c8 8981      		out __SREG__,r0
 632 02ca 8083      		pop r0
 169:ir_heat.c     **** 	r_in++;
 633               	reg__
 634               		reti
 170:ir_heat.c     **** }
 639               	e5:
 641 02d6 0F90      	.global	__vector_19
 643 02da DF91      	__vector_19:
 645 02de EF91      	.LM46:
 646 02e0 9F91      	.LFBB6:
 647 02e2 8F91      		push __zero_reg__
 648 02e4 0F90      		push r0
 649 02e6 0FBE      		in r0,__SREG__
 650 02e8 0F90      		push r0
 651 02ea 1F90      		clr __zero_reg__
 652 02ec 1895      		push r24
 653               		push r25
 654               		push r26
 655               		push r27
 656               		push r30
 657               		push r31
 658               		push r29
 659               		push r28
 660               		in r28,__SP_L__
 661               		in r29,__SP_H__
 171:ir_heat.c     **** 
 172:ir_heat.c     **** SIGNAL(SIG_USART_DATA) {
 662               	/* frame size = 0 */
 664               	.LM47:
 665 02ee 1F92      		lds r25,t_in
 666 02f0 0F92      		lds r24,t_out
 667 02f2 0FB6      		cp r25,r24
 668 02f4 0F92      		breq .L25
 670 02f8 8F93      	.LM48:
 671 02fa 9F93      		ldi r26,lo8(198)
 672 02fc AF93      		ldi r27,hi8(198)
 673 02fe BF93      		lds r24,t_out
 674 0300 EF93      		mov r24,r24
 675 0302 FF93      		ldi r25,lo8(0)
 676 0304 DF93      		andi r24,lo8(31)
 677 0306 CF93      		andi r25,hi8(31)
 678 0308 CDB7      		movw r30,r24
 679 030a DEB7      		subi r30,lo8(-(tbuf))
 680               		sbci r31,hi8(-(tbuf))
 681               		ld r24,Z
 173:ir_heat.c     **** //*******************
 174:ir_heat.c     **** // Data register empty interrupt handler.
 175:ir_heat.c     **** // Indicates that next char can be transmitted
 176:ir_heat.c     **** //
 177:ir_heat.c     **** 	if(t_in != t_out) {
 682               	,0,179,.LM49-.LFBB6
 683               	.LM49:
 684 030c 9091 0000 		lds r24,t_out
 685 0310 8091 0000 		subi r24,lo8(-(1))
 686 0314 9817      		sts t_out,r24
 687 0316 01F0      		rjmp .L27
 178:ir_heat.c     **** 		UDR0 = tbuf[t_out & TMASK];
 689               	.LM50:
 690 0318 A6EC      		ldi r26,lo8(193)
 691 031a B0E0      		ldi r27,hi8(193)
 692 031c 8091 0000 		ldi r30,lo8(193)
 693 0320 882F      		ldi r31,hi8(193)
 694 0322 90E0      		ld r24,Z
 695 0324 8F71      		andi r24,lo8(-33)
 696 0326 9070      		st X,r24
 697 0328 FC01      	.L27:
 698 032a E050      	/* epilogue start */
 700 032e 8081      	.LM51:
 701 0330 8C93      		pop r28
 179:ir_heat.c     **** 		t_out++;	
 702               	r31
 703               		pop r30
 704 0332 8091 0000 		pop r27
 705 0336 8F5F      		pop r26
 706 0338 8093 0000 		pop r25
 707 033c 00C0      		pop r24
 708               		pop r0
 180:ir_heat.c     **** 	}
 181:ir_heat.c     **** 	else {
 182:ir_heat.c     **** 		UCSR0B &= ~(1<<UDRIE0);
 709               	SREG__,r0
 710               		pop r0
 711 033e A1EC      		pop __zero_reg__
 712 0340 B0E0      		reti
 714 0344 F0E0      	.Lscope6:
 716 0348 8F7D      	.global	tbuflen
 718               	tbuflen:
 183:ir_heat.c     **** 	}
 184:ir_heat.c     **** }
 720               	B7:
 721               		push r29
 722 034c CF91      		push r28
 723 034e DF91      		in r28,__SP_L__
 724 0350 FF91      		in r29,__SP_H__
 725 0352 EF91      	/* prologue: function */
 726 0354 BF91      	/* frame size = 0 */
 728 0358 9F91      	.LM53:
 729 035a 8F91      		lds r25,t_in
 730 035c 0F90      		lds r24,t_out
 731 035e 0FBE      		mov r18,r25
 732 0360 0F90      		sub r18,r24
 733 0362 1F90      		mov r24,r18
 734 0364 1895      	/* epilogue start */
 736               	.LM54:
 737               		pop r28
 738               		pop r29
 739               		ret
 185:ir_heat.c     **** 
 186:ir_heat.c     **** char tbuflen(void) {
 741               	RT_putchar:F(0,1)",36,0,0,UART_putchar
 744 0366 DF93      	.global	UART_putchar
 746 036a CDB7      	UART_putchar:
 748               	.LM55:
 749               	.LFBB8:
 187:ir_heat.c     **** //****************
 188:ir_heat.c     **** // Retrieve pending chars in TX buffer
 189:ir_heat.c     **** //
 190:ir_heat.c     **** 	return(t_in - t_out);
 750               	
 751               		push r28
 752 036e 9091 0000 		rcall .
 753 0372 8091 0000 		push __tmp_reg__
 754 0376 292F      		in r28,__SP_L__
 755 0378 281B      		in r29,__SP_H__
 756 037a 822F      	/* prologue: function */
 757               	/* frame size = 3 */
 191:ir_heat.c     **** }
 758               	1,r24
 759               		std Y+3,r23
 760 037c CF91      		std Y+2,r22
 761 037e DF91      	.L31:
 763               	.LM56:
 764               		call tbuflen
 765               		mov r18,r24
 766               		ldi r19,lo8(0)
 767               		ldi r24,lo8(32)
 768               		ldi r25,hi8(32)
 769               		sub r24,r18
 770               		sbc r25,r19
 192:ir_heat.c     **** 
 193:ir_heat.c     **** int UART_putchar(char c, FILE *stream) {
 771               	pc r25,__zero_reg__
 772               		brlt .L31
 774 0382 DF93      	.LM57:
 775 0384 CF93      		lds r24,t_in
 776 0386 00D0      		mov r24,r24
 777 0388 0F92      		ldi r25,lo8(0)
 778 038a CDB7      		andi r24,lo8(31)
 779 038c DEB7      		andi r25,hi8(31)
 780               		movw r30,r24
 781               		subi r30,lo8(-(tbuf))
 782 038e 8983      		sbci r31,hi8(-(tbuf))
 783 0390 7B83      		ldd r24,Y+1
 784 0392 6A83      		st Z,r24
 194:ir_heat.c     **** //*********************
 195:ir_heat.c     **** // Fills the transmit buffer, if it is full wait
 196:ir_heat.c     **** //
 197:ir_heat.c     **** 	while((TBUFSIZE - tbuflen()) <= 2);  // Wait...
 786               	,t_in
 787               		subi r24,lo8(-(1))
 788 0394 0E94 0000 		sts t_in,r24
 790 039a 30E0      	.LM59:
 791 039c 80E2      		ldi r26,lo8(193)
 792 039e 90E0      		ldi r27,hi8(193)
 793 03a0 821B      		ldi r30,lo8(193)
 794 03a2 930B      		ldi r31,hi8(193)
 795 03a4 8330      		ld r24,Z
 796 03a6 9105      		ori r24,lo8(32)
 797 03a8 04F0      		st X,r24
 198:ir_heat.c     **** 	
 199:ir_heat.c     **** 	// Add data to the transmit buffer, enable TXCIE
 200:ir_heat.c     **** 	//
 201:ir_heat.c     **** 	tbuf[t_in & TMASK] = c;
 798               	,204,.LM60-.LFBB8
 799               	.LM60:
 800 03aa 8091 0000 		ldi r24,lo8(0)
 801 03ae 882F      		ldi r25,hi8(0)
 802 03b0 90E0      	/* epilogue start */
 804 03b4 9070      	.LM61:
 805 03b6 FC01      		pop __tmp_reg__
 806 03b8 E050      		pop __tmp_reg__
 807 03ba F040      		pop __tmp_reg__
 808 03bc 8981      		pop r28
 809 03be 8083      		pop r29
 202:ir_heat.c     **** 	t_in++;	
 810               	UART_putchar, .-UART_putchar
 811               	.Lscope8:
 813 03c4 8F5F      	.global	rbuflen
 203:ir_heat.c     **** 	UCSR0B |= (1<<UDRIE0);			// Enable UDR empty interrupt	
 815               	en:
 817 03ca A1EC      	.LM62:
 818 03cc B0E0      	.LFBB9:
 819 03ce E1EC      		push r29
 820 03d0 F0E0      		push r28
 821 03d2 8081      		in r28,__SP_L__
 822 03d4 8062      		in r29,__SP_H__
 823 03d6 8C93      	/* prologue: function */
 204:ir_heat.c     **** 	return(0);
 824               	size = 0 */
 826 03d8 80E0      	.LM63:
 827 03da 90E0      		lds r25,r_in
 828               		lds r24,r_out
 205:ir_heat.c     **** }
 829               	r18,r25
 830               		sub r18,r24
 831 03dc 0F90      		mov r24,r18
 832 03de 0F90      	/* epilogue start */
 834 03e2 CF91      	.LM64:
 835 03e4 DF91      		pop r28
 836 03e6 0895      		pop r29
 837               		ret
 839               	.Lscope9:
 842               	.global	UART_getchar
 206:ir_heat.c     **** 
 207:ir_heat.c     **** char rbuflen(void) {
 843               	tchar, @function
 844               	UART_getchar:
 846 03e8 DF93      	.LM65:
 847 03ea CF93      	.LFBB10:
 848 03ec CDB7      		push r29
 849 03ee DEB7      		push r28
 850               		rcall .
 851               		push __tmp_reg__
 208:ir_heat.c     **** // ***************
 209:ir_heat.c     **** // Retrive pending chars in RX buffer
 210:ir_heat.c     **** //
 211:ir_heat.c     **** 	return(r_in - r_out);
 852               	_SP_L__
 853               		in r29,__SP_H__
 854 03f0 9091 0000 	/* prologue: function */
 855 03f4 8091 0000 	/* frame size = 3 */
 856 03f8 292F      		std Y+3,r25
 857 03fa 281B      		std Y+2,r24
 858 03fc 822F      	.L36:
 212:ir_heat.c     **** }
 860               	call rbuflen
 861               		tst r24
 862 03fe CF91      		breq .L36
 864 0402 0895      	.LM67:
 865               		lds r24,r_out
 866               		mov r24,r24
 867               		ldi r25,lo8(0)
 868               		andi r24,lo8(31)
 869               		andi r25,hi8(31)
 870               		movw r30,r24
 871               		subi r30,lo8(-(rbuf))
 213:ir_heat.c     **** 
 214:ir_heat.c     **** int UART_getchar(FILE *stream) {
 872               	8(-(rbuf))
 873               		ld r24,Z
 874               		std Y+1,r24
 876 0406 CF93      	.LM68:
 877 0408 00D0      		lds r24,r_out
 878 040a 0F92      		subi r24,lo8(-(1))
 879 040c CDB7      		sts r_out,r24
 881               	.LM69:
 882               		ldd r24,Y+1
 883 0410 9B83      		mov r24,r24
 884 0412 8A83      		ldi r25,lo8(0)
 885               	/* epilogue start */
 215:ir_heat.c     **** //*******************
 216:ir_heat.c     **** // Retieves character from UART. This function is to be passed
 217:ir_heat.c     **** // to fdevopen
 218:ir_heat.c     **** //
 219:ir_heat.c     **** 	unsigned char c;
 220:ir_heat.c     **** 	while(rbuflen() == 0);	  // Wait...
 886               	24,.LM70-.LFBB10
 887               	.LM70:
 888 0414 0E94 0000 		pop __tmp_reg__
 889 0418 8823      		pop __tmp_reg__
 890 041a 01F0      		pop __tmp_reg__
 221:ir_heat.c     **** 	c = rbuf[r_out & RMASK];
 891               	r28
 892               		pop r29
 893 041c 8091 0000 		ret
 898 0428 FC01      	.Lscope10:
 900 042c F040      	.global	UART_first_init
 902 0430 8983      	UART_first_init:
 222:ir_heat.c     **** 	r_out++;	
 903               	,226,.LM71-.LFBB11
 904               	.LM71:
 905 0432 8091 0000 	.LFBB11:
 906 0436 8F5F      		push r29
 907 0438 8093 0000 		push r28
 223:ir_heat.c     **** 	return(c);
 908               	28,__SP_L__
 909               		in r29,__SP_H__
 910 043c 8981      	/* prologue: function */
 911 043e 882F      	/* frame size = 0 */
 913               	.LM72:
 224:ir_heat.c     **** }
 914               	30,lo8(196)
 915               		ldi r31,hi8(196)
 916 0442 0F90      		ldi r24,lo8(12)
 917 0444 0F90      		ldi r25,hi8(12)
 918 0446 0F90      		std Z+1,r25
 919 0448 CF91      		st Z,r24
 921 044c 0895      	.LM73:
 922               		ldi r30,lo8(193)
 923               		ldi r31,hi8(193)
 924               		ldi r24,lo8(-104)
 925               		st Z,r24
 927               	.LM74:
 928               		ldi r30,lo8(194)
 929               		ldi r31,hi8(194)
 930               		ldi r24,lo8(6)
 225:ir_heat.c     **** 
 226:ir_heat.c     **** void UART_first_init(void) {
 931               		68,0,236,.LM75-.LFBB11
 932               	.LM75:
 933               		ldi r24,lo8(gs(UART_putchar))
 934 044e DF93      		ldi r25,hi8(gs(UART_putchar))
 935 0450 CF93      		ldi r18,lo8(gs(UART_getchar))
 936 0452 CDB7      		ldi r19,hi8(gs(UART_getchar))
 937 0454 DEB7      		movw r22,r18
 938               		call fdevopen
 227:ir_heat.c     **** //***********************
 228:ir_heat.c     **** // The function fdevopen(..) must contain as parameters the
 229:ir_heat.c     **** // corresponding  ..putchar() and  ..getchar() functions, defined before.
 230:ir_heat.c     **** //
 231:ir_heat.c     **** 	UBRR0 = 12;										 // 4800 BPS
 940               	 #APP */
 941               	 ;  237 "ir_heat.c" 1
 942 0456 E4EC      		sei
 943 0458 F0E0      	 ;  0 "" 2
 944 045a 8CE0      	/* epilogue start */
 946 045e 9183      	.LM77:
 947 0460 8083      	/* #NOAPP */
 232:ir_heat.c     **** 	
 233:ir_heat.c     **** 	UCSR0B = (1<<RXCIE0)|(1<<TXEN0)|(1<<RXEN0);	 // 8 Databits, receive and transmit enabled, receive 
 948               	
 949               		pop r29
 950 0462 E1EC      		ret
 952 0466 88E9      	.Lscope11:
 953 0468 8083      		.data
 234:ir_heat.c     **** 	UCSR0C = (1<<UCSZ01)|(1<<UCSZ00);
 954               	
 955               		.string	"Array:"
 956 046a E2EC      	.LC5:
 957 046c F0E0      		.string	" %i"
 958 046e 86E0      		.text
 235:ir_heat.c     **** 	
 236:ir_heat.c     **** 	fdevopen(UART_putchar, UART_getchar);
 960               	al	print_array
 962 0472 80E0      	print_array:
 964 0476 20E0      	.LM78:
 965 0478 30E0      	.LFBB12:
 966 047a B901      		push r29
 967 047c 0E94 0000 		push r28
 237:ir_heat.c     **** 	sei();											 // Global interrupt enable
 968               	tmp_reg__
 969               		in r28,__SP_L__
 970               		in r29,__SP_H__
 971               	/* prologue: function */
 972 0480 7894      	/* frame size = 1 */
 974               	.LM79:
 238:ir_heat.c     **** }
 975               	.
 976               		in r30,__SP_L__
 977               		in r31,__SP_H__
 978 0482 CF91      		adiw r30,1
 979 0484 DF91      		ldi r24,lo8(.LC4)
 980 0486 0895      		ldi r25,hi8(.LC4)
 981               		std Z+1,r25
 982               		st Z,r24
 983               		call printf
 984               		pop __tmp_reg__
 985 001b 4172 7261 		pop __tmp_reg__
 985      793A 00
 987 0022 2025 6900 	.LM80:
 988               		std Y+1,__zero_reg__
 989               		rjmp .L41
 990               	.L42:
 992               	.LM81:
 239:ir_heat.c     **** 
 240:ir_heat.c     **** 
 241:ir_heat.c     **** void print_array(){
 993               	r24,r24
 994               		ldi r25,lo8(0)
 995               		lsl r24
 996 0488 DF93      		rol r25
 997 048a CF93      		movw r30,r24
 998 048c 0F92      		subi r30,lo8(-(t_array))
 999 048e CDB7      		sbci r31,hi8(-(t_array))
 1000 0490 DEB7      		ld r18,Z
 1001               		ldd r19,Z+1
 1002               		rcall .
 242:ir_heat.c     **** 	uint8_t i;
 243:ir_heat.c     ****   	printf("Array:");
 1003               	in r30,__SP_L__
 1004               		in r31,__SP_H__
 1005 0492 00D0      		adiw r30,1
 1006 0494 EDB7      		ldi r24,lo8(.LC5)
 1007 0496 FEB7      		ldi r25,hi8(.LC5)
 1008 0498 3196      		std Z+1,r25
 1009 049a 80E0      		st Z,r24
 1010 049c 90E0      		std Z+3,r19
 1011 049e 9183      		std Z+2,r18
 1012 04a0 8083      		call printf
 1013 04a2 0E94 0000 		pop __tmp_reg__
 1014 04a6 0F90      		pop __tmp_reg__
 1015 04a8 0F90      		pop __tmp_reg__
 244:ir_heat.c     **** 	for(i=0;i<6;i++) {
 1016               	g__
 1018 04aa 1982      	.LM82:
 1019 04ac 00C0      		ldd r24,Y+1
 1020               		subi r24,lo8(-(1))
 245:ir_heat.c     ****    	printf(" %i", t_array[i]);
 1021               	Y+1,r24
 1022               	.L41:
 1023 04ae 8981      		ldd r24,Y+1
 1024 04b0 882F      		cpi r24,lo8(6)
 1025 04b2 90E0      		brlo .L42
 1027 04b6 991F      	.LM83:
 1028 04b8 FC01      		ldi r24,lo8(10)
 1029 04ba E050      		ldi r25,hi8(10)
 1030 04bc F040      		call putchar
 1031 04be 2081      	/* epilogue start */
 1033 04c2 00D0      	.LM84:
 1034 04c4 00D0      		pop __tmp_reg__
 1035 04c6 EDB7      		pop r28
 1036 04c8 FEB7      		pop r29
 1037 04ca 3196      		ret
 1042 04d4 3383      	.Lscope12:
 1045 04dc 0F90      	.global	add_value
 1047 04e0 0F90      	add_value:
 1049               	.LM85:
 1050               	.LFBB13:
 1051 04e4 8981      		push r29
 1052 04e6 8F5F      		push r28
 1053 04e8 8983      		rcall .
 1054               		push __tmp_reg__
 1055 04ea 8981      		in r28,__SP_L__
 1056 04ec 8630      		in r29,__SP_H__
 1057 04ee 00F0      	/* prologue: function */
 246:ir_heat.c     **** 	}
 247:ir_heat.c     ****   	printf("\n");
 1058               	d Y+2,r24
 1060 04f0 8AE0      	.LM86:
 1061 04f2 90E0      		lds r24,t_array
 1062 04f4 0E94 0000 		lds r25,(t_array)+1
 1063               		sbiw r24,0
 248:ir_heat.c     **** }
 1064               	.L45
 1066 04f8 0F90      	.LM87:
 1067 04fa CF91      		ldd r24,Y+2
 1068 04fc DF91      		ldd r25,Y+3
 1069 04fe 0895      		sts (t_array+10)+1,r25
 1070               		sts t_array+10,r24
 1071               		lds r24,t_array+10
 1072               		lds r25,(t_array+10)+1
 1073               		sts (t_array+8)+1,r25
 1074               		sts t_array+8,r24
 1075               		lds r24,t_array+8
 1076               		lds r25,(t_array+8)+1
 1077               		sts (t_array+6)+1,r25
 1078               		sts t_array+6,r24
 1079               		lds r24,t_array+6
 249:ir_heat.c     **** 
 250:ir_heat.c     **** 
 251:ir_heat.c     **** void add_value(uint16_t value) {
 1080               	y+6)+1
 1081               		sts (t_array+4)+1,r25
 1082               		sts t_array+4,r24
 1083 0500 DF93      		lds r24,t_array+4
 1084 0502 CF93      		lds r25,(t_array+4)+1
 1085 0504 00D0      		sts (t_array+2)+1,r25
 1086 0506 0F92      		sts t_array+2,r24
 1087 0508 CDB7      		lds r24,t_array+2
 1088 050a DEB7      		lds r25,(t_array+2)+1
 1089               		sts (t_array)+1,r25
 1090               		sts t_array,r24
 1091 050c 9B83      		rjmp .L49
 1092 050e 8A83      	.L45:
 252:ir_heat.c     **** 	uint8_t i;
 253:ir_heat.c     **** 	if(t_array[0]==0) {
 1093               	257,.LM88-.LFBB13
 1094               	.LM88:
 1095 0510 8091 0000 		std Y+1,__zero_reg__
 1096 0514 9091 0000 		rjmp .L47
 1097 0518 0097      	.L48:
 254:ir_heat.c     **** 		t_array[0]=t_array[1]=t_array[2]=t_array[3]=t_array[4]=t_array[5]=value;
 1099               	
 1100               		ldd r24,Y+1
 1101 051c 8A81      		mov r20,r24
 1102 051e 9B81      		ldi r21,lo8(0)
 1103 0520 9093 0000 		ldd r24,Y+1
 1104 0524 8093 0000 		mov r24,r24
 1105 0528 8091 0000 		ldi r25,lo8(0)
 1106 052c 9091 0000 		adiw r24,1
 1107 0530 9093 0000 		lsl r24
 1108 0534 8093 0000 		rol r25
 1109 0538 8091 0000 		movw r30,r24
 1110 053c 9091 0000 		subi r30,lo8(-(t_array))
 1111 0540 9093 0000 		sbci r31,hi8(-(t_array))
 1112 0544 8093 0000 		ld r18,Z
 1113 0548 8091 0000 		ldd r19,Z+1
 1114 054c 9091 0000 		movw r24,r20
 1115 0550 9093 0000 		lsl r24
 1116 0554 8093 0000 		rol r25
 1117 0558 8091 0000 		movw r30,r24
 1118 055c 9091 0000 		subi r30,lo8(-(t_array))
 1119 0560 9093 0000 		sbci r31,hi8(-(t_array))
 1120 0564 8093 0000 		std Z+1,r19
 1121 0568 8091 0000 		st Z,r18
 1123 0570 9093 0000 	.LM90:
 1124 0574 8093 0000 		ldd r24,Y+1
 1125 0578 00C0      		subi r24,lo8(-(1))
 1126               		std Y+1,r24
 255:ir_heat.c     **** 	}
 256:ir_heat.c     **** 	else {
 257:ir_heat.c     **** 		for(i=0;i<5;i++) {
 1127               	,lo8(5)
 1128               		brlo .L48
 1130 057c 00C0      	.LM91:
 1131               		ldd r24,Y+2
 258:ir_heat.c     **** 			t_array[i]=t_array[i+1];
 1132               	r25,Y+3
 1133               		sts (t_array+10)+1,r25
 1134 057e 8981      		sts t_array+10,r24
 1136 0582 50E0      	.LM92:
 1137 0584 8981      		lds r18,t_array+10
 1138 0586 882F      		lds r19,(t_array+10)+1
 1139 0588 90E0      		lds r24,t_array+8
 1140 058a 0196      		lds r25,(t_array+8)+1
 1141 058c 880F      		movw r20,r18
 1142 058e 991F      		sub r20,r24
 1143 0590 FC01      		sbc r21,r25
 1144 0592 E050      		movw r24,r20
 1145 0594 F040      		movw r18,r24
 1146 0596 2081      		lsl r18
 1147 0598 3181      		rol r19
 1148 059a CA01      		movw r24,r18
 1149 059c 880F      		lsl r24
 1150 059e 991F      		rol r25
 1151 05a0 FC01      		lsl r24
 1152 05a2 E050      		rol r25
 1153 05a4 F040      		movw r22,r18
 1154 05a6 3183      		add r22,r24
 1155 05a8 2083      		adc r23,r25
 1156               		lds r20,slope2
 1157               		lds r21,(slope2)+1
 1158 05aa 8981      		movw r24,r20
 1159 05ac 8F5F      		lsl r24
 1160 05ae 8983      		rol r25
 1161               		movw r18,r24
 1162 05b0 8981      		lsl r18
 1163 05b2 8530      		rol r19
 1164 05b4 00F0      		lsl r18
 259:ir_heat.c     **** 		}
 260:ir_heat.c     **** 		t_array[5] = value;
 1165               	24,r18
 1166               		adc r25,r19
 1167 05b6 8A81      		add r24,r20
 1168 05b8 9B81      		adc r25,r21
 1169 05ba 9093 0000 		add r24,r22
 1170 05be 8093 0000 		adc r25,r23
 261:ir_heat.c     **** 		slope2 = (10*(t_array[5]-t_array[4]) + 19*slope2) / 20;
 1171               	18,lo8(20)
 1172               		ldi r19,hi8(20)
 1173 05c2 2091 0000 		movw r22,r18
 1174 05c6 3091 0000 		call __divmodhi4
 1175 05ca 8091 0000 		movw r24,r22
 1176 05ce 9091 0000 		sts (slope2)+1,r25
 1177 05d2 A901      		sts slope2,r24
 1178 05d4 481B      	.L49:
 1179 05d6 590B      	/* epilogue start */
 1181 05da 9C01      	.LM93:
 1182 05dc 220F      		pop __tmp_reg__
 1183 05de 331F      		pop __tmp_reg__
 1184 05e0 C901      		pop __tmp_reg__
 1185 05e2 880F      		pop r28
 1186 05e4 991F      		pop r29
 1187 05e6 880F      		ret
 1192 05f0 4091 0000 	.Lscope13:
 1194 05f8 CA01      	.global	get_slope
 1196 05fc 991F      	get_slope:
 1198 0600 220F      	.LM94:
 1199 0602 331F      	.LFBB14:
 1200 0604 220F      		push r29
 1201 0606 331F      		push r28
 1202 0608 220F      		rcall .
 1203 060a 331F      		rcall .
 1204 060c 820F      		rcall .
 1205 060e 931F      		in r28,__SP_L__
 1206 0610 840F      		in r29,__SP_H__
 1207 0612 951F      	/* prologue: function */
 1208 0614 860F      	/* frame size = 6 */
 1210 0618 24E1      	.LM95:
 1211 061a 30E0      		lds r18,t_array+10
 1212 061c B901      		lds r19,(t_array+10)+1
 1213 061e 0E94 0000 		lds r24,t_array
 1214 0622 CB01      		lds r25,(t_array)+1
 1215 0624 9093 0000 		movw r20,r18
 1216 0628 8093 0000 		sub r20,r24
 1217               		sbc r21,r25
 1218               		movw r24,r20
 262:ir_heat.c     **** 	}
 263:ir_heat.c     **** }
 1219               	-.LFBB14
 1220               	.LM96:
 1221 062c 0F90      		lds r18,t_array+8
 1222 062e 0F90      		lds r19,(t_array+8)+1
 1223 0630 0F90      		lds r24,t_array+2
 1224 0632 CF91      		lds r25,(t_array+2)+1
 1225 0634 DF91      		movw r20,r18
 1226 0636 0895      		sub r20,r24
 1227               		sbc r21,r25
 1228               		movw r24,r20
 1229               		std Y+4,r25
 1230               		std Y+3,r24
 1232               	.LM97:
 1233               		lds r18,t_array+6
 1234               		lds r19,(t_array+6)+1
 1235               		lds r24,t_array+4
 264:ir_heat.c     **** 
 265:ir_heat.c     **** 
 266:ir_heat.c     **** int16_t get_slope() {
 1236               	+4)+1
 1237               		movw r20,r18
 1238               		sub r20,r24
 1239 0638 DF93      		sbc r21,r25
 1240 063a CF93      		movw r24,r20
 1241 063c 00D0      		std Y+2,r25
 1242 063e 00D0      		std Y+1,r24
 1244 0642 CDB7      	.LM98:
 1245 0644 DEB7      		ldd r18,Y+5
 1246               		ldd r19,Y+6
 1247               		movw r24,r18
 267:ir_heat.c     **** 	int16_t s1, s2, s3;
 268:ir_heat.c     **** 
 269:ir_heat.c     **** 	s1 = t_array[5] - t_array[0];
 1248               	l r25
 1249               		movw r20,r24
 1250 0646 2091 0000 		add r20,r18
 1251 064a 3091 0000 		adc r21,r19
 1252 064e 8091 0000 		ldd r18,Y+3
 1253 0652 9091 0000 		ldd r19,Y+4
 1254 0656 A901      		movw r24,r18
 1255 0658 481B      		lsl r24
 1256 065a 590B      		rol r25
 1257 065c CA01      		lsl r24
 1258 065e 9E83      		rol r25
 1259 0660 8D83      		add r24,r18
 270:ir_heat.c     **** 	s2 = t_array[4] - t_array[1];
 1260               	
 1261               		add r20,r24
 1262 0662 2091 0000 		adc r21,r25
 1263 0666 3091 0000 		ldd r18,Y+1
 1264 066a 8091 0000 		ldd r19,Y+2
 1265 066e 9091 0000 		movw r24,r18
 1266 0672 A901      		lsl r24
 1267 0674 481B      		rol r25
 1268 0676 590B      		add r24,r18
 1269 0678 CA01      		adc r25,r19
 1270 067a 9C83      		movw r18,r24
 1271 067c 8B83      		lsl r18
 271:ir_heat.c     **** 	s3 = t_array[3] - t_array[2];
 1272               	sl r18
 1273               		rol r19
 1274 067e 2091 0000 		add r24,r18
 1275 0682 3091 0000 		adc r25,r19
 1276 0686 8091 0000 		add r24,r20
 1277 068a 9091 0000 		adc r25,r21
 1278 068e A901      		ldi r18,lo8(9)
 1279 0690 481B      		ldi r19,hi8(9)
 1280 0692 590B      		movw r22,r18
 1281 0694 CA01      		call __divmodhi4
 1282 0696 9A83      		movw r24,r22
 1283 0698 8983      	/* epilogue start */
 272:ir_heat.c     **** 	
 273:ir_heat.c     **** 	return ((3*s1+5*s2+15*s3)/9);
 1284               	,274,.LM99-.LFBB14
 1285               	.LM99:
 1286 069a 2D81      		adiw r28,6
 1287 069c 3E81      		in __tmp_reg__,__SREG__
 1288 069e C901      		cli
 1289 06a0 880F      		out __SP_H__,r29
 1290 06a2 991F      		out __SREG__,__tmp_reg__
 1291 06a4 AC01      		out __SP_L__,r28
 1292 06a6 420F      		pop r28
 1293 06a8 531F      		pop r29
 1294 06aa 2B81      		ret
 1301 06b8 820F      	.Lscope14:
 1305 06c0 2981      	.global	lookahead_temp
 1307 06c4 C901      	lookahead_temp:
 1309 06c8 991F      	.LM100:
 1310 06ca 820F      	.LFBB15:
 1311 06cc 931F      		push r29
 1312 06ce 9C01      		push r28
 1313 06d0 220F      		rcall .
 1314 06d2 331F      		rcall .
 1315 06d4 220F      		in r28,__SP_L__
 1316 06d6 331F      		in r29,__SP_H__
 1317 06d8 820F      	/* prologue: function */
 1318 06da 931F      	/* frame size = 4 */
 1319 06dc 840F      		std Y+3,r24
 1320 06de 951F      		std Y+4,r22
 1322 06e2 30E0      	.LM101:
 1323 06e4 B901      		lds r18,t_array+10
 1324 06e6 0E94 0000 		lds r19,(t_array+10)+1
 1325 06ea CB01      		lds r24,t_array+8
 1326               		lds r25,(t_array+8)+1
 274:ir_heat.c     **** }
 1327               	
 1328               		std Y+2,r25
 1329 06ec 2696      		std Y+1,r24
 1331 06f0 F894      	.LM102:
 1332 06f2 DEBF      		ldd r24,Y+4
 1333 06f4 0FBE      		mov r18,r24
 1334 06f6 CDBF      		ldi r19,lo8(0)
 1335 06f8 CF91      		ldd r24,Y+3
 1336 06fa DF91      		clr r25
 1337 06fc 0895      		sbrc r24,7
 1338               		com r25
 1339               		movw r20,r24
 1340               		mul r18,r20
 1341               		movw r24,r0
 1342               		mul r18,r21
 1343               		add r25,r0
 1344               		mul r19,r20
 1345               		add r25,r0
 1346               		clr r1
 1347               		movw r18,r24
 1348               		ldd r24,Y+1
 1349               		ldd r25,Y+2
 1350               		add r24,r18
 275:ir_heat.c     **** 
 276:ir_heat.c     **** 
 277:ir_heat.c     **** int16_t lookahead_temp(int8_t slope, uint8_t steps) {
 1351               	e start */
 1353               	.LM103:
 1354 06fe DF93      		pop __tmp_reg__
 1355 0700 CF93      		pop __tmp_reg__
 1356 0702 00D0      		pop __tmp_reg__
 1357 0704 00D0      		pop __tmp_reg__
 1358 0706 CDB7      		pop r28
 1359 0708 DEB7      		pop r29
 1360               		ret
 278:ir_heat.c     **** 	uint16_t av;
 279:ir_heat.c     **** //	for(i=0;i<6;i++) {
 280:ir_heat.c     **** //		if(t_array[i]>max) max=t_array[i];
 281:ir_heat.c     **** //	}
 282:ir_heat.c     **** 	av = (t_array[5]+t_array[4])>>1;
 1364               	,0,.Lscope15-.LFBB15
 1365               	.Lscope15:
 1368 0716 8091 0000 	.global	get_temperature
 1370 071e 820F      	get_temperature:
 1372 0722 9595      	.LM104:
 1373 0724 8795      	.LFBB16:
 1374 0726 9A83      		push r29
 1375 0728 8983      		push r28
 283:ir_heat.c     **** 	return (av + steps*(int16_t)slope);
 1376               	_L__
 1377               		in r29,__SP_H__
 1378 072a 8C81      		sbiw r28,15
 1379 072c 282F      		in __tmp_reg__,__SREG__
 1380 072e 30E0      		cli
 1381 0730 8B81      		out __SP_H__,r29
 1382 0732 9927      		out __SREG__,__tmp_reg__
 1383 0734 87FD      		out __SP_L__,r28
 1384 0736 9095      	/* prologue: function */
 1385 0738 AC01      	/* frame size = 15 */
 1386 073a 249F      		std Y+13,r24
 1388 073e 259F      	.LM105:
 1389 0740 900D      		ldi r24,lo8(-76)
 1390 0742 349F      		call i2c_start
 1392 0746 1124      	.LM106:
 1393 0748 9C01      		ldd r24,Y+13
 1394 074a 8981      		call i2c_write
 1396 074e 820F      	.LM107:
 1397 0750 931F      		ldi r24,lo8(-75)
 1398               		call i2c_rep_start
 284:ir_heat.c     **** }
 1399               	,0,298,.LM108-.LFBB16
 1400               	.LM108:
 1401 0752 0F90      		ldd r24,Y+4
 1402 0754 0F90      		tst r24
 1403 0756 0F90      		breq .L55
 1405 075a CF91      	.LM109:
 1406 075c DF91      		ldi r24,lo8(-75)
 1407 075e 0895      		call i2c_rep_start
 1408               	.L55:
 1410               	.LM110:
 1411               		call i2c_read_ack
 1412               		std Y+3,r24
 1414               	.LM111:
 1415               		call i2c_read_ack
 1416               		std Y+2,r24
 285:ir_heat.c     **** 
 286:ir_heat.c     **** 
 287:ir_heat.c     **** 
 288:ir_heat.c     **** uint16_t get_temperature(uint8_t adr) {
 1418               	2
 1419               		mov r24,r24
 1420               		ldi r25,lo8(0)
 1421 0760 DF93      		mov r25,r24
 1422 0762 CF93      		clr r24
 1423 0764 CDB7      		movw r18,r24
 1424 0766 DEB7      		ldd r24,Y+3
 1425 0768 2F97      		mov r24,r24
 1426 076a 0FB6      		ldi r25,lo8(0)
 1427 076c F894      		add r24,r18
 1428 076e DEBF      		adc r25,r19
 1429 0770 0FBE      		std Y+6,r25
 1430 0772 CDBF      		std Y+5,r24
 1432               	.LM113:
 1433 0774 8D87      		call i2c_read_ack
 289:ir_heat.c     **** 	uint16_t raw;
 290:ir_heat.c     **** 	uint8_t 	ret;
 291:ir_heat.c     **** 	uint8_t 	lo, hi, pec;
 292:ir_heat.c     **** 	uint8_t	pec_read[6];
 293:ir_heat.c     **** 
 294:ir_heat.c     **** 	i2c_start(MLX90614_WRITE);
 1434               	tabn	68,0,308,.LM114-.LFBB16
 1435               	.LM114:
 1436 0776 84EB      		call i2c_stop
 295:ir_heat.c     **** 	i2c_write(adr);
 1438               	15:
 1439               		ldd r24,Y+5
 1440 077c 8D85      		ldd r25,Y+6
 1441 077e 0E94 0000 		tst r25
 296:ir_heat.c     **** 	
 297:ir_heat.c     **** 	ret = i2c_rep_start(MLX90614_READ);
 1442               	e .L56
 1443               		std Y+15,__zero_reg__
 1444 0782 85EB      		std Y+14,__zero_reg__
 1445 0784 0E94 0000 		rjmp .L57
 1446 0788 8C83      	.L56:
 298:ir_heat.c     **** 	if(ret) {
 1447               	bn	68,0,311,.LM116-.LFBB16
 1448               	.LM116:
 1449 078a 8C81      		ldd r24,Y+5
 1450 078c 8823      		ldd r25,Y+6
 1451 078e 01F0      		ldi r18,lo8(5)
 299:ir_heat.c     **** 		i2c_rep_start(MLX90614_READ);
 1452               	r19,hi8(5)
 1453               		movw r22,r18
 1454 0790 85EB      		call __udivmodhi4
 1455 0792 0E94 0000 		movw r24,r22
 1456               		movw r18,r24
 300:ir_heat.c     ****    }
 301:ir_heat.c     **** 
 302:ir_heat.c     **** 	lo = i2c_read_ack();
 1457               	 r18,lo8(-(-2731))
 1458               		sbci r19,hi8(-(-2731))
 1459 0796 0E94 0000 		std Y+15,r19
 1460 079a 8B83      		std Y+14,r18
 303:ir_heat.c     **** 	hi = i2c_read_ack();
 1461               	:
 1462               		ldd r24,Y+14
 1463 079c 0E94 0000 		ldd r25,Y+15
 1464 07a0 8A83      	/* epilogue start */
 304:ir_heat.c     **** 	raw = (uint16_t)(hi<<8)+lo;
 1465               	abn	68,0,312,.LM117-.LFBB16
 1466               	.LM117:
 1467 07a2 8A81      		adiw r28,15
 1468 07a4 882F      		in __tmp_reg__,__SREG__
 1469 07a6 90E0      		cli
 1470 07a8 982F      		out __SP_H__,r29
 1471 07aa 8827      		out __SREG__,__tmp_reg__
 1472 07ac 9C01      		out __SP_L__,r28
 1473 07ae 8B81      		pop r28
 1474 07b0 882F      		pop r29
 1475 07b2 90E0      		ret
 305:ir_heat.c     **** 	//printf("0x%04x\n", raw);
 306:ir_heat.c     **** 	pec = i2c_read_ack();
 1480               	2)",128,0,0,2
 307:ir_heat.c     **** 	
 308:ir_heat.c     **** 	i2c_stop();
 1484               	abn	224,0,0,.Lscope16-.LFBB16
 1485               	.Lscope16:
 1486 07c2 0E94 0000 		.lcomm last.1959,1
 309:ir_heat.c     **** 	if(raw & 0x8000) return 0;
 1487               	ata
 1488               	.LC6:
 1489 07c6 8D81      		.string	">>> Relais ON"
 1490 07c8 9E81      	.LC7:
 1491 07ca 9923      		.string	">>> Relais OFF"
 1492 07cc 04F4      		.text
 1495 07d2 00C0      	.global	set_relais
 310:ir_heat.c     **** 	
 311:ir_heat.c     **** 	return (raw / 5 - 2731);
 1497               	:
 1499 07d4 8D81      	.LM118:
 1500 07d6 9E81      	.LFBB17:
 1501 07d8 25E0      		push r29
 1502 07da 30E0      		push r28
 1503 07dc B901      		push __tmp_reg__
 1504 07de 0E94 0000 		in r28,__SP_L__
 1505 07e2 CB01      		in r29,__SP_H__
 1506 07e4 9C01      	/* prologue: function */
 1507 07e6 2B5A      	/* frame size = 1 */
 1508 07e8 3A40      		std Y+1,r24
 1510 07ec 2E87      	.LM119:
 1511               		ldd r24,Y+1
 1512 07ee 8E85      		tst r24
 1513 07f0 9F85      		breq .L60
 312:ir_heat.c     **** }
 1515               	ast.1959
 1516               		ldd r24,Y+1
 1517 07f2 2F96      		cp r24,r25
 1518 07f4 0FB6      		breq .L61
 1519 07f6 F894      		ldi r24,lo8(.LC6)
 1520 07f8 DEBF      		ldi r25,hi8(.LC6)
 1521 07fa 0FBE      		call puts
 1522 07fc CDBF      	.L61:
 1524 0800 DF91      	.LM121:
 1525 0802 0895      		ldi r26,lo8(37)
 1526               		ldi r27,hi8(37)
 1527               		ldi r30,lo8(37)
 1528               		ldi r31,hi8(37)
 1529               		ld r24,Z
 1530               		ori r24,lo8(64)
 1531               		st X,r24
 1532               		rjmp .L62
 1533               	.L60:
 1535               	.LM122:
 1536               		lds r25,last.1959
 1537               		ldd r24,Y+1
 1538               		cp r24,r25
 1539 0026 3E3E 3E20 		breq .L63
 1539      5265 6C61 
 1539      6973 204F 
 1539      4E00 
 1540               		ldi r24,lo8(.LC7)
 1541 0034 3E3E 3E20 		ldi r25,hi8(.LC7)
 1541      5265 6C61 
 1541      6973 204F 
 1541      4646 00
 1542               		call puts
 1543               	.L63:
 1545               	.LM123:
 1546               		ldi r26,lo8(37)
 1547               		ldi r27,hi8(37)
 313:ir_heat.c     **** 
 314:ir_heat.c     **** 
 315:ir_heat.c     **** void set_relais(uint8_t on) {
 1548               	
 1549               		ld r24,Z
 1550               		andi r24,lo8(-65)
 1551 0804 DF93      		st X,r24
 1552 0806 CF93      	.L62:
 1554 080a CDB7      	.LM124:
 1555 080c DEB7      		ldd r24,Y+1
 1556               		sts last.1959,r24
 1557               	/* epilogue start */
 316:ir_heat.c     **** 	static uint8_t last = 0;
 317:ir_heat.c     **** 	if(on) {
 1559               	op __tmp_reg__
 1560               		pop r28
 1561 0810 8981      		pop r29
 1562 0812 8823      		ret
 318:ir_heat.c     **** 		if(on != last) printf(">>> Relais ON\n");
 1564               	bs	"last:V(4,2)",38,0,0,last.1959
 1567 081a 8981      	.Lscope17:
 1568 081c 8917      		.data
 1569 081e 01F0      	.LC8:
 1570 0820 80E0      		.string	"\nStart"
 1571 0822 90E0      	.LC9:
 1572 0824 0E94 0000 		.string	"Error Temp=0"
 1573               	.LC10:
 319:ir_heat.c     **** 		RELAIS_ON;
 1574               	Startup %i "
 1575               	.LC11:
 1576 0828 A5E2      		.string	"Temp: %i, "
 1577 082a B0E0      	.LC12:
 1578 082c E5E2      		.string	"slope_raw: %i, slope: %i "
 1579 082e F0E0      	.LC13:
 1580 0830 8081      		.string	"Ambient: %i\n"
 1581 0832 8064      	.LC14:
 1582 0834 8C93      		.string	"Temperature Protect Rule 48, "
 1583 0836 00C0      	.LC15:
 1584               		.string	"Temperature Protect Rule 45, "
 320:ir_heat.c     **** 	}
 321:ir_heat.c     **** 	else {
 322:ir_heat.c     **** 		if(on != last) printf(">>> Relais OFF\n");
 1585               	ring	"Temperature Protect Rule 40, "
 1586               	.LC17:
 1587 0838 9091 0000 		.string	"Temperature Protect Rule 35, "
 1588 083c 8981      	.LC18:
 1589 083e 8917      		.string	"Temperature Protect Rule 30, "
 1590 0840 01F0      	.LC19:
 1591 0842 80E0      		.string	"Temperature Protect General Rule, "
 1592 0844 90E0      	.LC20:
 1593 0846 0E94 0000 		.string	"Counter: %i; \n"
 1594               		.text
 323:ir_heat.c     **** 		RELAIS_OFF;
 1595               	ain:F(0,1)",36,0,0,main
 1596               	.global	main
 1598 084c B0E0      	main:
 1600 0850 F0E0      	.LM126:
 1601 0852 8081      	.LFBB18:
 1602 0854 8F7B      		push r29
 1603 0856 8C93      		push r28
 1604               		in r28,__SP_L__
 324:ir_heat.c     **** 	}
 325:ir_heat.c     **** 	last = on;
 1605               	SP_H__
 1606               		sbiw r28,16
 1607 0858 8981      		in __tmp_reg__,__SREG__
 1608 085a 8093 0000 		cli
 1609               		out __SP_H__,r29
 326:ir_heat.c     **** }
 1610               	__SREG__,__tmp_reg__
 1611               		out __SP_L__,r28
 1612 085e 0F90      	/* prologue: function */
 1613 0860 CF91      	/* frame size = 16 */
 1615 0864 0895      	.LM127:
 1616               		ldi r30,lo8(36)
 1617               		ldi r31,hi8(36)
 1618               		ldi r24,lo8(-64)
 1619               		st Z,r24
 1621               	.LM128:
 1622               		ldi r30,lo8(39)
 1623 0043 0A53 7461 		ldi r31,hi8(39)
 1623      7274 00
 1624               		ldi r24,lo8(8)
 1625 004a 4572 726F 		st Z,r24
 1625      7220 5465 
 1625      6D70 3D30 
 1625      00
 1627 0057 5374 6172 	.LM129:
 1627      7475 7020 
 1627      2569 2000 
 1628               		ldi r30,lo8(42)
 1629 0063 5465 6D70 		ldi r31,hi8(42)
 1629      3A20 2569 
 1629      2C20 00
 1630               		ldi r24,lo8(24)
 1631 006e 736C 6F70 		st Z,r24
 1631      655F 7261 
 1631      773A 2025 
 1631      692C 2073 
 1631      6C6F 7065 
 1633 0088 416D 6269 	.LM130:
 1633      656E 743A 
 1633      2025 690A 
 1633      00
 1634               		ldi r30,lo8(37)
 1635 0095 5465 6D70 		ldi r31,hi8(37)
 1635      6572 6174 
 1635      7572 6520 
 1635      5072 6F74 
 1635      6563 7420 
 1636               		ldi r24,lo8(63)
 1637 00b3 5465 6D70 		st Z,r24
 1637      6572 6174 
 1637      7572 6520 
 1637      5072 6F74 
 1637      6563 7420 
 1639 00d1 5465 6D70 	.LM131:
 1639      6572 6174 
 1639      7572 6520 
 1639      5072 6F74 
 1639      6563 7420 
 1640               		ldi r30,lo8(40)
 1641 00ef 5465 6D70 		ldi r31,hi8(40)
 1641      6572 6174 
 1641      7572 6520 
 1641      5072 6F74 
 1641      6563 7420 
 1642               		ldi r24,lo8(-9)
 1643 010d 5465 6D70 		st Z,r24
 1643      6572 6174 
 1643      7572 6520 
 1643      5072 6F74 
 1643      6563 7420 
 1645 012b 5465 6D70 	.LM132:
 1645      6572 6174 
 1645      7572 6520 
 1645      5072 6F74 
 1645      6563 7420 
 1646               		ldi r30,lo8(43)
 1647 014e 436F 756E 		ldi r31,hi8(43)
 1647      7465 723A 
 1647      2025 693B 
 1647      200A 00
 1648               		ldi r24,lo8(-25)
 1649               		st Z,r24
 1651               	.LM133:
 1652               		ldi r30,lo8(100)
 327:ir_heat.c     **** 
 328:ir_heat.c     **** 
 329:ir_heat.c     **** 
 330:ir_heat.c     **** 
 331:ir_heat.c     **** // ***********************************************************
 332:ir_heat.c     **** // Main program
 333:ir_heat.c     **** //
 334:ir_heat.c     **** int main(void) {
 1653               	9,.LM134-.LFBB18
 1654               	.LM134:
 1655               	/* #APP */
 1656 0866 DF93      	 ;  349 "ir_heat.c" 1
 1657 0868 CF93      		wdr
 1658 086a CDB7      	 ;  0 "" 2
 1660 086e 6097      	.LM135:
 1661 0870 0FB6      	/* #NOAPP */
 1662 0872 F894      		ldi r24,lo8(24)
 1663 0874 DEBF      		ldi r25,hi8(24)
 1664 0876 0FBE      		ldi r18,lo8(41)
 1665 0878 CDBF      	/* #APP */
 1666               	 ;  350 "ir_heat.c" 1
 1667               		in __tmp_reg__,__SREG__
 335:ir_heat.c     ****    // Ausgnge definieren
 336:ir_heat.c     **** 	DDRB = 0x00 | (1<<RELAIS) | (1<<BUZZER);
 1668               	96,r24
 1669               		out __SREG__,__tmp_reg__
 1670 087a E4E2      		sts 96,r18
 1671 087c F0E0      		
 1672 087e 80EC      	 ;  0 "" 2
 337:ir_heat.c     **** 	DDRC = 0x00 | (1<<FLASH_LED);
 1674               	:
 1675               	/* #NOAPP */
 1676 0882 E7E2      		call UART_first_init
 1678 0886 88E0      	.LM137:
 1679 0888 8083      		call i2c_init
 338:ir_heat.c     **** 	DDRD = 0x00 | (1<<STATUS_LED1) | (1<<STATUS_LED2);
 1680               	n	68,0,356,.LM138-.LFBB18
 1681               	.LM138:
 1682 088a EAE2      		sts interval,__zero_reg__
 1684 088e 88E1      	.LM139:
 1685 0890 8083      		ldi r30,lo8(177)
 339:ir_heat.c     **** 
 340:ir_heat.c     **** 	// Ausgnge ausschalten
 341:ir_heat.c     **** 	PORTB = ~((1<<RELAIS) | (1<<BUZZER));
 1686               	31,hi8(177)
 1687               		ldi r24,lo8(7)
 1688 0892 E5E2      		st Z,r24
 1690 0896 8FE3      	.LM140:
 1691 0898 8083      		ldi r30,lo8(112)
 342:ir_heat.c     **** 	PORTC = ~(1<<FLASH_LED);
 1692               	31,hi8(112)
 1693               		ldi r24,lo8(1)
 1694 089a E8E2      		st Z,r24
 1696 089e 87EF      	.LM141:
 1697 08a0 8083      		ldi r30,lo8(68)
 343:ir_heat.c     **** 	PORTD = ~((1<<STATUS_LED1) | (1<<STATUS_LED2) | (1<<FLASH_LED));
 1698               	31,hi8(68)
 1699               		st Z,__zero_reg__
 1701 08a4 F0E0      	.LM142:
 1702 08a6 87EE      		ldi r30,lo8(69)
 1703 08a8 8083      		ldi r31,hi8(69)
 344:ir_heat.c     **** 
 345:ir_heat.c     **** 	// TWI aus Energiesparmode rausnehmen
 346:ir_heat.c     **** 	PRR != ~(1<<PRTWI);
 1704               	24,lo8(3)
 1705               		st Z,r24
 1707 08ac F0E0      	.LM143:
 1708 08ae 2081      		ldi r30,lo8(110)
 347:ir_heat.c     **** 
 348:ir_heat.c     **** 	// Whatchdog initialisieren
 349:ir_heat.c     **** 	wdt_reset();
 1709               	r31,hi8(110)
 1710               		ldi r24,lo8(1)
 1711               		st Z,r24
 1713 08b0 A895      	.LM144:
 1714               		ldi r30,lo8(128)
 350:ir_heat.c     **** 	wdt_enable(WDTO_8S);
 1715               	31,hi8(128)
 1716               		st Z,__zero_reg__
 1718 08b2 88E1      	.LM145:
 1719 08b4 90E0      		ldi r30,lo8(129)
 1720 08b6 29E2      		ldi r31,hi8(129)
 1721               		st Z,__zero_reg__
 1723 08b8 0FB6      	.LM146:
 1724 08ba F894      		ldi r30,lo8(130)
 1725 08bc A895      		ldi r31,hi8(130)
 1726 08be 8093 6000 		st Z,__zero_reg__
 1728 08c4 2093 6000 	.LM147:
 1729               		ldi r30,lo8(111)
 1730               		ldi r31,hi8(111)
 351:ir_heat.c     **** 	
 352:ir_heat.c     **** 	// UART initialisieren
 353:ir_heat.c     **** 	UART_first_init();
 1731               		st Z,r24
 1733               	.LM148:
 1734 08c8 0E94 0000 		ldi r30,lo8(105)
 354:ir_heat.c     **** 	i2c_init();
 1735               	 r31,hi8(105)
 1736               		ldi r24,lo8(2)
 1737 08cc 0E94 0000 		st Z,r24
 355:ir_heat.c     **** 	
 356:ir_heat.c     **** 	interval=0;
 1738               	tabn	68,0,374,.LM149-.LFBB18
 1739               	.LM149:
 1740 08d0 1092 0000 		ldi r30,lo8(61)
 357:ir_heat.c     **** 	// Timer 2 initialisieren (RTC)
 358:ir_heat.c     ****    TCCR2B = (1<<CS22) | (1<<CS21) | (1<<CS20);	// clk/256
 1741               	i r31,hi8(61)
 1742               		ldi r24,lo8(1)
 1743 08d4 E1EB      		st Z,r24
 1745 08d8 87E0      	.LM150:
 1746 08da 8083      		ldi r24,lo8(.LC8)
 359:ir_heat.c     ****    TIMSK2 = (1<<TOIE2);
 1747               	25,hi8(.LC8)
 1748               		call puts
 1750 08de F0E0      	.LM151:
 1751 08e0 81E0      		ldi r26,lo8(43)
 1752 08e2 8083      		ldi r27,hi8(43)
 360:ir_heat.c     **** 
 361:ir_heat.c     ****  	// Timer 0 initialisieren (Blinken)
 362:ir_heat.c     **** 	TCCR0A = 0;
 1753               	30,lo8(43)
 1754               		ldi r31,hi8(43)
 1755 08e4 E4E4      		ld r24,Z
 1756 08e6 F0E0      		ori r24,lo8(16)
 1757 08e8 1082      		st X,r24
 363:ir_heat.c     **** 	TCCR0B = (0<<CS02) | (1<<CS01) | (1<<CS00);
 1758               	bn	68,0,379,.LM152-.LFBB18
 1759               	.LM152:
 1760 08ea E5E4      		ldi r26,lo8(43)
 1761 08ec F0E0      		ldi r27,hi8(43)
 1762 08ee 83E0      		ldi r30,lo8(43)
 1763 08f0 8083      		ldi r31,hi8(43)
 364:ir_heat.c     **** 	TIMSK0 = (1<<TOIE0);
 1764               	4,Z
 1765               		andi r24,lo8(-9)
 1766 08f2 EEE6      		st X,r24
 1768 08f6 81E0      	.LM153:
 1769 08f8 8083      		ldi r24,lo8(0)
 365:ir_heat.c     **** 	
 366:ir_heat.c     **** 	
 367:ir_heat.c     **** 	TCCR1A = 0;
 1770               	set_relais
 1772 08fa E0E8      	.LM154:
 1773 08fc F0E0      		sts mode,__zero_reg__
 368:ir_heat.c     **** 	TIMER1_STOP;
 1775               	5:
 1776               		std Y+3,__zero_reg__
 1778 0902 F0E0      	.LM156:
 1779 0904 1082      		ldi r24,lo8(-1)
 369:ir_heat.c     **** 	TCCR1C = 0;
 1780               	Y+2,r24
 1782 0906 E2E8      	.LM157:
 1783 0908 F0E0      		ldi r24,lo8(3)
 1784 090a 1082      		std Y+1,r24
 370:ir_heat.c     **** 	TIMSK1 = (1<<TOIE1);
 1785               	bn	68,0,391,.LM158-.LFBB18
 1786               	.LM158:
 1787 090c EFE6      		std Y+9,__zero_reg__
 1788 090e F0E0      		std Y+8,__zero_reg__
 1790 0912 8083      	.LM159:
 371:ir_heat.c     **** 	
 372:ir_heat.c     **** 	// Interrupt fr Taster initialisieren
 373:ir_heat.c     **** 	EICRA = (1<<ISC01);
 1791               	P */
 1792               	 ;  394 "ir_heat.c" 1
 1793 0914 E9E6      		sei
 1794 0916 F0E0      	 ;  0 "" 2
 1795 0918 82E0      	/* #NOAPP */
 1796 091a 8083      	.L90:
 374:ir_heat.c     **** 	EIMSK = (1<<INT0);
 1797               	n	68,0,397,.LM160-.LFBB18
 1798               	.LM160:
 1799 091c EDE3      		lds r24,interval
 1800 091e F0E0      		cpi r24,lo8(16)
 1801 0920 81E0      		brge .+2
 1802 0922 8083      		rjmp .L66
 375:ir_heat.c     **** 	
 376:ir_heat.c     **** 
 377:ir_heat.c     **** 	printf("\nStart\n");
 1803               	n	68,0,398,.LM161-.LFBB18
 1804               	.LM161:
 1805 0924 80E0      	/* #APP */
 1806 0926 90E0      	 ;  398 "ir_heat.c" 1
 1807 0928 0E94 0000 		wdr
 378:ir_heat.c     **** 	STATUS_LED1_ON;		// grne LED ein
 1808               	 "" 2
 1810 092c ABE2      	.LM162:
 1811 092e B0E0      	/* #NOAPP */
 1812 0930 EBE2      		sts interval,__zero_reg__
 1814 0934 8081      	.LM163:
 1815 0936 8061      		std Y+3,__zero_reg__
 379:ir_heat.c     **** 	STATUS_LED2_OFF;		// rote LED aus
 1817               	ldd r24,Y+8
 1818               		ldd r25,Y+9
 1819 093a ABE2      		asr r25
 1820 093c B0E0      		ror r24
 1821 093e EBE2      		asr r25
 1822 0940 F0E0      		ror r24
 1823 0942 8081      		asr r25
 1824 0944 877F      		ror r24
 1825 0946 8C93      		asr r25
 380:ir_heat.c     **** 	set_relais(0);			// Relais aus
 1826               		std Y+11,r25
 1827               		std Y+10,r24
 1829 094a 0E94 0000 	.LM165:
 381:ir_heat.c     **** 	mode = MODE_OFF;
 1830               	 Y+9,__zero_reg__
 1831               		std Y+8,__zero_reg__
 382:ir_heat.c     **** 	
 383:ir_heat.c     **** 	int16_t temp, temp_sum;
 384:ir_heat.c     **** //	int16_t	lookahead;
 385:ir_heat.c     **** 	int16_t 	slope;
 386:ir_heat.c     **** 	int16_t	slope_raw;
 387:ir_heat.c     **** 	uint8_t	count=0;
 1833               	166:
 1834               		ldd r24,Y+10
 1835 0952 1B82      		ldd r25,Y+11
 388:ir_heat.c     **** 	uint8_t  last_interval = 0xff;
 1836               	iw r24,0
 1837               		brne .L67
 1839 0956 8A83      	.LM167:
 389:ir_heat.c     **** 	uint8_t	startup = 3;
 1840               	ll .
 1841               		in r30,__SP_L__
 1842 0958 83E0      		in r31,__SP_H__
 1843 095a 8983      		adiw r30,1
 390:ir_heat.c     **** 	
 391:ir_heat.c     **** 	temp_sum = 0;
 1844               	 r24,lo8(.LC9)
 1845               		ldi r25,hi8(.LC9)
 1846 095c 1986      		std Z+1,r25
 1847 095e 1886      		st Z,r24
 392:ir_heat.c     **** 	
 393:ir_heat.c     **** 	// Interrupts aktivieren
 394:ir_heat.c     **** 	sei();
 1848               	l printf
 1849               		pop __tmp_reg__
 1850               		pop __tmp_reg__
 1851               		rjmp .L68
 1852 0960 7894      	.L67:
 1854               	.LM168:
 1855               		ldd r24,Y+1
 395:ir_heat.c     **** 
 396:ir_heat.c     ****    while(1) {
 397:ir_heat.c     ****    	if(!(interval < 16)) { 					// Alle 16x (alle 4 Sekunden) Temperatur checken
 1856               	
 1857               		breq .L69
 1859 0966 8031      	.LM169:
 1860 0968 04F4      		ldd r24,Y+1
 1861 096a 00C0      		mov r18,r24
 398:ir_heat.c     ****    		wdt_reset();                  	// Whatchdog zurcksetzen
 1862               	r19,lo8(0)
 1863               		rcall .
 1864               		rcall .
 1865               		in r30,__SP_L__
 1866 096c A895      		in r31,__SP_H__
 1867               		adiw r30,1
 399:ir_heat.c     ****    		interval=0;
 1868               	24,lo8(.LC10)
 1869               		ldi r25,hi8(.LC10)
 1870               		std Z+1,r25
 1871 096e 1092 0000 		st Z,r24
 400:ir_heat.c     ****    		count=0;
 1872               	 Z+3,r19
 1873               		std Z+2,r18
 1874 0972 1B82      		call printf
 401:ir_heat.c     **** 
 402:ir_heat.c     **** 			temp = temp_sum >> 4;				// Mittelwert der 16 Messungen ermitteln
 1875               	p __tmp_reg__
 1876               		pop __tmp_reg__
 1877 0974 8885      		pop __tmp_reg__
 1878 0976 9985      		pop __tmp_reg__
 1880 097a 8795      	.LM170:
 1881 097c 9595      		ldd r24,Y+1
 1882 097e 8795      		subi r24,lo8(-(-1))
 1883 0980 9595      		std Y+1,r24
 1885 0984 9595      	.LM171:
 1886 0986 8795      		ldi r24,lo8(7)
 1887 0988 9B87      		call get_temperature
 1888 098a 8A87      		std Y+11,r25
 403:ir_heat.c     **** 			temp_sum = 0;
 1890               	.LM172:
 1891 098c 1986      		std Y+7,__zero_reg__
 1892 098e 1886      		std Y+6,__zero_reg__
 404:ir_heat.c     **** 	      //printf("Temp: %i\n", temp);
 405:ir_heat.c     **** 	      if(temp==0) {
 1893               	:
 1895 0990 8A85      	.LM173:
 1896 0992 9B85      		rcall .
 1897 0994 0097      		rcall .
 1898 0996 01F4      		in r30,__SP_L__
 406:ir_heat.c     **** 	      	// error!
 407:ir_heat.c     **** 	      	printf("Error Temp=0");
 1899               	1,__SP_H__
 1900               		adiw r30,1
 1901 0998 00D0      		ldi r24,lo8(.LC11)
 1902 099a EDB7      		ldi r25,hi8(.LC11)
 1903 099c FEB7      		std Z+1,r25
 1904 099e 3196      		st Z,r24
 1905 09a0 80E0      		ldd r24,Y+10
 1906 09a2 90E0      		ldd r25,Y+11
 1907 09a4 9183      		std Z+3,r25
 1908 09a6 8083      		std Z+2,r24
 1909 09a8 0E94 0000 		call printf
 1910 09ac 0F90      		pop __tmp_reg__
 1911 09ae 0F90      		pop __tmp_reg__
 1912 09b0 00C0      		pop __tmp_reg__
 1913               		pop __tmp_reg__
 408:ir_heat.c     **** 	      }
 409:ir_heat.c     **** 	      else {
 410:ir_heat.c     **** 				if (startup>0) {
 1914               	8,.LM174-.LFBB18
 1915               	.LM174:
 1916 09b2 8981      		ldd r24,Y+10
 1917 09b4 8823      		ldd r25,Y+11
 1918 09b6 01F0      		call add_value
 411:ir_heat.c     **** 					// wird nur beim ersten Durchlauf, direkt nach Startup ausgefhrt
 412:ir_heat.c     **** 					printf("Startup %i ", startup);
 1919               	bn	68,0,420,.LM175-.LFBB18
 1920               	.LM175:
 1921 09b8 8981      		call get_slope
 1922 09ba 282F      		std Y+5,r25
 1923 09bc 30E0      		std Y+4,r24
 1925 09c0 00D0      	.LM176:
 1926 09c2 EDB7      		ldd r18,Y+6
 1927 09c4 FEB7      		ldd r19,Y+7
 1928 09c6 3196      		movw r24,r18
 1929 09c8 80E0      		lsl r24
 1930 09ca 90E0      		rol r25
 1931 09cc 9183      		add r24,r18
 1932 09ce 8083      		adc r25,r19
 1933 09d0 3383      		movw r18,r24
 1934 09d2 2283      		lsl r18
 1935 09d4 0E94 0000 		rol r19
 1936 09d8 0F90      		lsl r18
 1937 09da 0F90      		rol r19
 1938 09dc 0F90      		movw r20,r24
 1939 09de 0F90      		add r20,r18
 413:ir_heat.c     **** 					startup--;
 1940               	,Y+4
 1941               		ldd r25,Y+5
 1942 09e0 8981      		movw r18,r24
 1943 09e2 8150      		lsl r18
 1944 09e4 8983      		rol r19
 414:ir_heat.c     **** 					temp = get_temperature(ADR_T_OBJ1);
 1945               	 r24,r18
 1946               		lsl r24
 1947 09e6 87E0      		rol r25
 1948 09e8 0E94 0000 		lsl r24
 1949 09ec 9B87      		rol r25
 1950 09ee 8A87      		add r24,r18
 415:ir_heat.c     **** 					slope = 0;
 1951               	25,r19
 1952               		add r24,r20
 1953 09f0 1F82      		adc r25,r21
 1954 09f2 1E82      		std Y+16,r25
 1955               		std Y+15,r24
 416:ir_heat.c     **** 				}
 417:ir_heat.c     ****    	   	printf("Temp: %i, ", temp);
 1956               	r24,Y+15
 1957               		ldd r25,Y+16
 1958 09f4 00D0      		tst r25
 1959 09f6 00D0      		brge .L70
 1960 09f8 EDB7      		ldd r18,Y+15
 1961 09fa FEB7      		ldd r19,Y+16
 1962 09fc 3196      		subi r18,lo8(-(15))
 1963 09fe 80E0      		sbci r19,hi8(-(15))
 1964 0a00 90E0      		std Y+16,r19
 1965 0a02 9183      		std Y+15,r18
 1966 0a04 8083      	.L70:
 1967 0a06 8A85      		ldd r24,Y+15
 1968 0a08 9B85      		ldd r25,Y+16
 1969 0a0a 9383      		asr r25
 1970 0a0c 8283      		ror r24
 1971 0a0e 0E94 0000 		asr r25
 1972 0a12 0F90      		ror r24
 1973 0a14 0F90      		asr r25
 1974 0a16 0F90      		ror r24
 1975 0a18 0F90      		asr r25
 418:ir_heat.c     ****    	   	add_value(temp);									// Neue Temperatur zu Array hinzufgen
 1976               	5
 1977               		std Y+6,r24
 1979 0a1c 9B85      	.LM177:
 1980 0a1e 0E94 0000 		rcall .
 419:ir_heat.c     ****    	   	//print_array();
 420:ir_heat.c     ****    	   	slope_raw = get_slope();						// Aktuelle Steigung ermitteln
 1981               	l .
 1982               		rcall .
 1983 0a22 0E94 0000 		in r30,__SP_L__
 1984 0a26 9D83      		in r31,__SP_H__
 1985 0a28 8C83      		adiw r30,1
 421:ir_heat.c     **** 				//if(slope_raw<0) slope_raw = 0;
 422:ir_heat.c     ****    	   	slope = (15*slope + 10*slope_raw)/16;		// Steigung wird mit einer Dmpfung von 16 gedmpft
 1986               	r24,lo8(.LC12)
 1987               		ldi r25,hi8(.LC12)
 1988 0a2a 2E81      		std Z+1,r25
 1989 0a2c 3F81      		st Z,r24
 1990 0a2e C901      		ldd r24,Y+4
 1991 0a30 880F      		ldd r25,Y+5
 1992 0a32 991F      		std Z+3,r25
 1993 0a34 820F      		std Z+2,r24
 1994 0a36 931F      		ldd r24,Y+6
 1995 0a38 9C01      		ldd r25,Y+7
 1996 0a3a 220F      		std Z+5,r25
 1997 0a3c 331F      		std Z+4,r24
 1998 0a3e 220F      		call printf
 1999 0a40 331F      		in r24,__SP_L__
 2000 0a42 AC01      		in r25,__SP_H__
 2001 0a44 420F      		adiw r24,6
 2002 0a46 531F      		in __tmp_reg__,__SREG__
 2003 0a48 8C81      		cli
 2004 0a4a 9D81      		out __SP_H__,r25
 2005 0a4c 9C01      		out __SREG__,__tmp_reg__
 2006 0a4e 220F      		out __SP_L__,r24
 2008 0a52 C901      	.LM178:
 2009 0a54 880F      		ldi r24,lo8(6)
 2010 0a56 991F      		call get_temperature
 2011 0a58 880F      		movw r18,r24
 2012 0a5a 991F      		rcall .
 2013 0a5c 820F      		rcall .
 2014 0a5e 931F      		in r30,__SP_L__
 2015 0a60 840F      		in r31,__SP_H__
 2016 0a62 951F      		adiw r30,1
 2017 0a64 988B      		ldi r24,lo8(.LC13)
 2018 0a66 8F87      		ldi r25,hi8(.LC13)
 2019 0a68 8F85      		std Z+1,r25
 2020 0a6a 9889      		st Z,r24
 2021 0a6c 9923      		std Z+3,r19
 2022 0a6e 04F4      		std Z+2,r18
 2023 0a70 2F85      		call printf
 2024 0a72 3889      		pop __tmp_reg__
 2025 0a74 215F      		pop __tmp_reg__
 2026 0a76 3F4F      		pop __tmp_reg__
 2027 0a78 388B      		pop __tmp_reg__
 2029               	.LM179:
 2030 0a7c 8F85      		ldd r24,Y+10
 2031 0a7e 9889      		ldd r25,Y+11
 2032 0a80 9595      		ldi r18,hi8(481)
 2033 0a82 8795      		cpi r24,lo8(481)
 2034 0a84 9595      		cpc r25,r18
 2035 0a86 8795      		brlt .L71
 2037 0a8a 8795      	.LM180:
 2038 0a8c 9595      		ldd r24,Y+6
 2039 0a8e 8795      		ldd r25,Y+7
 2040 0a90 9F83      		cpi r24,31
 2041 0a92 8E83      		cpc r25,__zero_reg__
 423:ir_heat.c     ****    	   	printf("slope_raw: %i, slope: %i ", slope_raw, slope);
 2042               	181:
 2043               		ldi r24,lo8(6)
 2044 0a94 00D0      		sts off_counter,r24
 2046 0a98 00D0      	.LM182:
 2047 0a9a EDB7      		rcall .
 2048 0a9c FEB7      		in r30,__SP_L__
 2049 0a9e 3196      		in r31,__SP_H__
 2050 0aa0 80E0      		adiw r30,1
 2051 0aa2 90E0      		ldi r24,lo8(.LC14)
 2052 0aa4 9183      		ldi r25,hi8(.LC14)
 2053 0aa6 8083      		std Z+1,r25
 2054 0aa8 8C81      		st Z,r24
 2055 0aaa 9D81      		call printf
 2056 0aac 9383      		pop __tmp_reg__
 2057 0aae 8283      		pop __tmp_reg__
 2058 0ab0 8E81      		rjmp .L68
 2059 0ab2 9F81      	.L71:
 2061 0ab6 8483      	.LM183:
 2062 0ab8 0E94 0000 		ldd r24,Y+10
 2063 0abc 8DB7      		ldd r25,Y+11
 2064 0abe 9EB7      		ldi r19,hi8(451)
 2065 0ac0 0696      		cpi r24,lo8(451)
 2066 0ac2 0FB6      		cpc r25,r19
 2067 0ac4 F894      		brlt .L73
 2069 0ac8 0FBE      	.LM184:
 2070 0aca 8DBF      		ldd r24,Y+6
 424:ir_heat.c     **** 				//lookahead=lookahead_temp(slope, 5);   	   	
 425:ir_heat.c     ****    	   	//printf("Prognose: %i\n", lookahead);
 426:ir_heat.c     ****    	   	printf("Ambient: %i\n", get_temperature(ADR_T_A));
 2071               	 r25,__zero_reg__
 2072               		brge .+2
 2073 0acc 86E0      		rjmp .L68
 2075 0ad2 9C01      	.LM185:
 2076 0ad4 00D0      		ldi r24,lo8(6)
 2077 0ad6 00D0      		sts off_counter,r24
 2079 0ada FEB7      	.LM186:
 2080 0adc 3196      		rcall .
 2081 0ade 80E0      		in r30,__SP_L__
 2082 0ae0 90E0      		in r31,__SP_H__
 2083 0ae2 9183      		adiw r30,1
 2084 0ae4 8083      		ldi r24,lo8(.LC15)
 2085 0ae6 3383      		ldi r25,hi8(.LC15)
 2086 0ae8 2283      		std Z+1,r25
 2087 0aea 0E94 0000 		st Z,r24
 2088 0aee 0F90      		call printf
 2089 0af0 0F90      		pop __tmp_reg__
 2090 0af2 0F90      		pop __tmp_reg__
 2091 0af4 0F90      		rjmp .L68
 427:ir_heat.c     **** 				
 428:ir_heat.c     **** 				// Je nach aktueller Temperatur und Steigung in Temperaturschutz gehen 	   	
 429:ir_heat.c     **** 	   		if(temp > 480) {
 2092               	3,.LM187-.LFBB18
 2093               	.LM187:
 2094 0af6 8A85      		ldd r24,Y+10
 2095 0af8 9B85      		ldd r25,Y+11
 2096 0afa 21E0      		ldi r18,hi8(401)
 2097 0afc 813E      		cpi r24,lo8(401)
 2098 0afe 9207      		cpc r25,r18
 2099 0b00 04F0      		brlt .L75
 430:ir_heat.c     **** 	   			// Temperatur > 48C
 431:ir_heat.c     **** 	   			if(slope > 30) {
 2100               	68,0,445,.LM188-.LFBB18
 2101               	.LM188:
 2102 0b02 8E81      		ldd r24,Y+6
 2103 0b04 9F81      		ldd r25,Y+7
 2104 0b06 8F31      		cpi r24,61
 2105 0b08 9105      		cpc r25,__zero_reg__
 2106 0b0a 04F4      		brge .+2
 2107 0b0c 00C0      		rjmp .L68
 432:ir_heat.c     **** 	   				off_counter = OFF_COUNTER+1;
 2108               	68,0,446,.LM189-.LFBB18
 2109               	.LM189:
 2110 0b0e 86E0      		ldi r24,lo8(6)
 2111 0b10 8093 0000 		sts off_counter,r24
 433:ir_heat.c     **** 	   				printf("Temperature Protect Rule 48, ");
 2112               	abn	68,0,447,.LM190-.LFBB18
 2113               	.LM190:
 2114 0b14 00D0      		rcall .
 2115 0b16 EDB7      		in r30,__SP_L__
 2116 0b18 FEB7      		in r31,__SP_H__
 2117 0b1a 3196      		adiw r30,1
 2118 0b1c 80E0      		ldi r24,lo8(.LC16)
 2119 0b1e 90E0      		ldi r25,hi8(.LC16)
 2120 0b20 9183      		std Z+1,r25
 2121 0b22 8083      		st Z,r24
 2122 0b24 0E94 0000 		call printf
 2123 0b28 0F90      		pop __tmp_reg__
 2124 0b2a 0F90      		pop __tmp_reg__
 2125 0b2c 00C0      		rjmp .L68
 2126               	.L75:
 434:ir_heat.c     **** 	   			}
 435:ir_heat.c     **** 	   		}
 436:ir_heat.c     **** 	   		else if(temp > 450) {
 2127               	0,.LM191-.LFBB18
 2128               	.LM191:
 2129 0b2e 8A85      		ldd r24,Y+10
 2130 0b30 9B85      		ldd r25,Y+11
 2131 0b32 31E0      		ldi r19,hi8(351)
 2132 0b34 833C      		cpi r24,lo8(351)
 2133 0b36 9307      		cpc r25,r19
 2134 0b38 04F0      		brlt .L77
 437:ir_heat.c     **** 	   			// Temperatur > 45C
 438:ir_heat.c     **** 	   			if(slope > 50) {
 2135               	68,0,452,.LM192-.LFBB18
 2136               	.LM192:
 2137 0b3a 8E81      		ldd r24,Y+6
 2138 0b3c 9F81      		ldd r25,Y+7
 2139 0b3e 8333      		cpi r24,81
 2140 0b40 9105      		cpc r25,__zero_reg__
 2141 0b42 04F4      		brge .+2
 2142 0b44 00C0      		rjmp .L68
 439:ir_heat.c     **** 	   				off_counter = OFF_COUNTER+1;
 2143               	68,0,453,.LM193-.LFBB18
 2144               	.LM193:
 2145 0b46 86E0      		ldi r24,lo8(6)
 2146 0b48 8093 0000 		sts off_counter,r24
 440:ir_heat.c     **** 	   				printf("Temperature Protect Rule 45, ");
 2147               	abn	68,0,454,.LM194-.LFBB18
 2148               	.LM194:
 2149 0b4c 00D0      		rcall .
 2150 0b4e EDB7      		in r30,__SP_L__
 2151 0b50 FEB7      		in r31,__SP_H__
 2152 0b52 3196      		adiw r30,1
 2153 0b54 80E0      		ldi r24,lo8(.LC17)
 2154 0b56 90E0      		ldi r25,hi8(.LC17)
 2155 0b58 9183      		std Z+1,r25
 2156 0b5a 8083      		st Z,r24
 2157 0b5c 0E94 0000 		call printf
 2158 0b60 0F90      		pop __tmp_reg__
 2159 0b62 0F90      		pop __tmp_reg__
 2160 0b64 00C0      		rjmp .L68
 2161               	.L77:
 441:ir_heat.c     **** 	   			}
 442:ir_heat.c     **** 	   		}
 443:ir_heat.c     **** 	   		else if(temp > 400) {
 2162               	7,.LM195-.LFBB18
 2163               	.LM195:
 2164 0b66 8A85      		ldd r24,Y+10
 2165 0b68 9B85      		ldd r25,Y+11
 2166 0b6a 21E0      		ldi r18,hi8(301)
 2167 0b6c 8139      		cpi r24,lo8(301)
 2168 0b6e 9207      		cpc r25,r18
 2169 0b70 04F0      		brlt .L79
 444:ir_heat.c     **** 	   			// Temperatur > 40C
 445:ir_heat.c     **** 	   			if(slope > 60) {
 2170               	68,0,459,.LM196-.LFBB18
 2171               	.LM196:
 2172 0b72 8E81      		ldd r24,Y+6
 2173 0b74 9F81      		ldd r25,Y+7
 2174 0b76 8D33      		cpi r24,121
 2175 0b78 9105      		cpc r25,__zero_reg__
 2176 0b7a 04F4      		brlt .L68
 446:ir_heat.c     **** 	   				off_counter = OFF_COUNTER+1;
 2178               		ldi r24,lo8(6)
 2179               		sts off_counter,r24
 2181 0b80 8093 0000 	.LM198:
 447:ir_heat.c     **** 	   				printf("Temperature Protect Rule 40, ");
 2182               	ll .
 2183               		in r30,__SP_L__
 2184 0b84 00D0      		in r31,__SP_H__
 2185 0b86 EDB7      		adiw r30,1
 2186 0b88 FEB7      		ldi r24,lo8(.LC18)
 2187 0b8a 3196      		ldi r25,hi8(.LC18)
 2188 0b8c 80E0      		std Z+1,r25
 2189 0b8e 90E0      		st Z,r24
 2190 0b90 9183      		call printf
 2191 0b92 8083      		pop __tmp_reg__
 2192 0b94 0E94 0000 		pop __tmp_reg__
 2193 0b98 0F90      		rjmp .L68
 2194 0b9a 0F90      	.L79:
 2196               	.LM199:
 448:ir_heat.c     **** 	   			}
 449:ir_heat.c     **** 	   		}
 450:ir_heat.c     **** 	   		else if(temp > 350) {
 2197               	dd r25,Y+7
 2198               		cpi r24,161
 2199 0b9e 8A85      		cpc r25,__zero_reg__
 2200 0ba0 9B85      		brlt .L68
 2202 0ba4 8F35      	.LM200:
 2203 0ba6 9307      		ldi r24,lo8(6)
 2204 0ba8 04F0      		sts off_counter,r24
 451:ir_heat.c     **** 	   			// Temperatur > 35C
 452:ir_heat.c     **** 	   			if(slope > 80) {
 2205               	68,0,468,.LM201-.LFBB18
 2206               	.LM201:
 2207 0baa 8E81      		rcall .
 2208 0bac 9F81      		in r30,__SP_L__
 2209 0bae 8135      		in r31,__SP_H__
 2210 0bb0 9105      		adiw r30,1
 2211 0bb2 04F4      		ldi r24,lo8(.LC19)
 2212 0bb4 00C0      		ldi r25,hi8(.LC19)
 453:ir_heat.c     **** 	   				off_counter = OFF_COUNTER+1;
 2213               	,r25
 2214               		st Z,r24
 2215 0bb6 86E0      		call printf
 2216 0bb8 8093 0000 		pop __tmp_reg__
 454:ir_heat.c     **** 	   				printf("Temperature Protect Rule 35, ");
 2217               	 __tmp_reg__
 2218               	.L68:
 2220 0bbe EDB7      	.LM202:
 2221 0bc0 FEB7      		lds r24,off_counter
 2222 0bc2 3196      		tst r24
 2223 0bc4 80E0      		breq .L81
 2225 0bc8 9183      	.LM203:
 2226 0bca 8083      		lds r24,off_counter
 2227 0bcc 0E94 0000 		subi r24,lo8(-(-1))
 2228 0bd0 0F90      		sts off_counter,r24
 2230 0bd4 00C0      	.LM204:
 2231               		lds r24,mode
 455:ir_heat.c     ****                }
 456:ir_heat.c     **** 	   		}
 457:ir_heat.c     **** 	   		else if(temp > 300) {
 2232               	
 2233               		brne .L82
 2234 0bd6 8A85      		ldi r24,lo8(3)
 2235 0bd8 9B85      		sts mode,r24
 2236 0bda 21E0      	.L82:
 2238 0bde 9207      	.LM205:
 2239 0be0 04F0      		lds r24,off_counter
 458:ir_heat.c     **** 	   			// Temperatur > 30C
 459:ir_heat.c     **** 	   			if(slope > 120) {
 2240               	4,lo8(-(-1))
 2241               		sts off_counter,r24
 2243 0be4 9F81      	.LM204:
 2244 0be6 8937      		lds r24,mode
 2245 0be8 9105      		cpi r24,lo8(1)
 2246 0bea 04F0      		brne .L82
 460:ir_heat.c     **** 	   				off_counter = OFF_COUNTER+1;
 2247               	4,lo8(3)
 2248               		sts mode,r24
 2249 0bec 86E0      	.L82:
 461:ir_heat.c     **** 		   			printf("Temperature Protect Rule 30, ");
 2251               	:
 2252               		lds r24,off_counter
 2253 0bf2 00D0      		subi r24,lo8(-(-1))
 2254 0bf4 EDB7      		sts off_counter,r24
 2256 0bf8 3196      	.LM204:
 2257 0bfa 80E0      		lds r24,mode
 2258 0bfc 90E0      		cpi r24,lo8(1)
 2259 0bfe 9183      		brne .L82
 2260 0c00 8083      		ldi r24,lo8(3)
 2261 0c02 0E94 0000 		sts mode,r24
 2262 0c06 0F90      	.L82:
 2264 0c0a 00C0      	.LM205:
 2265               		lds r24,off_counter
 462:ir_heat.c     **** 		   		}
 463:ir_heat.c     **** 	   		}
 464:ir_heat.c     **** 	   		else {
 465:ir_heat.c     **** 	   			// Ansonsten
 466:ir_heat.c     **** 	   			if(slope > 160) {
 2266               	di r19,lo8(0)
 2267               		rcall .
 2268 0c0c 8E81      		rcall .
 2269 0c0e 9F81      		in r30,__SP_L__
 2270 0c10 813A      		in r31,__SP_H__
 2271 0c12 9105      		adiw r30,1
 2272 0c14 04F0      		ldi r24,lo8(.LC20)
 467:ir_heat.c     **** 	   				off_counter = OFF_COUNTER+1;
 2273               	24,lo8(3)
 2274               		sts mode,r24
 2275 0c16 86E0      	.L82:
 468:ir_heat.c     **** 	   				printf("Temperature Protect General Rule, ");
 2277               	:
 2278               		lds r24,off_counter
 2279 0c1c 00D0      		subi r24,lo8(-(-1))
 2280 0c1e EDB7      		sts off_counter,r24
 2282 0c22 3196      	.LM204:
 2283 0c24 80E0      		lds r24,mode
 2284 0c26 90E0      		cpi r24,lo8(1)
 2285 0c28 9183      		brne .L82
 2286 0c2a 8083      		ldi r24,lo8(3)
 2287 0c2c 0E94 0000 		sts mode,r24
 2288 0c30 0F90      	.L82:
 2290               	.LM205:
 469:ir_heat.c     **** 	   			}
 470:ir_heat.c     **** 	   		}
 471:ir_heat.c     **** 
 472:ir_heat.c     ****    	   }
 473:ir_heat.c     ****    		if(off_counter) {
 2291               	ounter
 2292               		mov r18,r24
 2293 0c34 8091 0000 		ldi r19,lo8(0)
 2294 0c38 8823      		rcall .
 2295 0c3a 01F0      		rcall .
 474:ir_heat.c     ****    			// Protection Counter luft
 475:ir_heat.c     ****   				off_counter--;
 2296               	.LM204-.LFBB18
 2297               	.LM204:
 2298 0c3c 8091 0000 		lds r24,mode
 2299 0c40 8150      		cpi r24,lo8(1)
 2300 0c42 8093 0000 		brne .L82
 476:ir_heat.c     ****   				if(mode == MODE_ON) mode = MODE_TEMP_PROT;
 2301               	r24,lo8(3)
 2302               		sts mode,r24
 2303 0c46 8091 0000 	.L82:
 2305 0c4c 01F4      	.LM205:
 2306 0c4e 83E0      		lds r24,off_counter
 2307 0c50 8093 0000 		mov r18,r24
 2308               		ldi r19,lo8(0)
 477:ir_heat.c     **** 				printf("Counter: %i; \n", off_counter);
 2309               	24
 2311 0c54 8091 0000 	.LM204:
 2312 0c58 282F      		lds r24,mode
 2313 0c5a 30E0      		cpi r24,lo8(1)
 2314 0c5c 00D0      		brne .L82
 2315 0c5e 00D0      		ldi r24,lo8(3)
 2316 0c60 EDB7      		sts mode,r24
 2317 0c62 FEB7      	.L82:
 2319 0c66 80E0      	.LM205:
 2320 0c68 90E0      		lds r24,off_counter
 2321 0c6a 9183      		mov r18,r24
 2322 0c6c 8083      		ldi r19,lo8(0)
 2323 0c6e 3383      		rcall .
 2324 0c70 2283      		rcall .
 2325 0c72 0E94 0000 		in r30,__SP_L__
 2326 0c76 0F90      		in r31,__SP_H__
 2327 0c78 0F90      		adiw r30,1
 2328 0c7a 0F90      		ldi r24,lo8(.LC20)
 2329 0c7c 0F90      		ldi r25,hi8(.LC20)
 2330 0c7e 00C0      		std Z+1,r25
 2331               		st Z,r24
 478:ir_heat.c     ****    		}
 479:ir_heat.c     ****    		else {
 480:ir_heat.c     ****    			if(mode == MODE_TEMP_PROT) mode = MODE_OFF;
 2332               	18
 2333               		call printf
 2334 0c80 8091 0000 		pop __tmp_reg__
 2335 0c84 8330      		pop __tmp_reg__
 2336 0c86 01F4      		pop __tmp_reg__
 2337 0c88 1092 0000 		pop __tmp_reg__
 2338 0c8c 00C0      		rjmp .L84
 2339               	.L81:
 481:ir_heat.c     ****    		}
 482:ir_heat.c     **** 		}
 483:ir_heat.c     **** 		else if(interval != last_interval) {
 2340               	30,1
 2341               		ldi r24,lo8(.LC20)
 2342 0c8e 8091 0000 		ldi r25,hi8(.LC20)
 2343 0c92 282F      		std Z+1,r25
 2344 0c94 3327      		st Z,r24
 2345 0c96 27FD      		std Z+3,r19
 2346 0c98 3095      		std Z+2,r18
 2347 0c9a 8A81      		call printf
 2348 0c9c 882F      		pop __tmp_reg__
 2349 0c9e 90E0      		pop __tmp_reg__
 2350 0ca0 2817      		pop __tmp_reg__
 2351 0ca2 3907      		pop __tmp_reg__
 2352 0ca4 01F0      		rjmp .L84
 484:ir_heat.c     **** 			// In jedem Interval 1x die Temperatur abrufen
 485:ir_heat.c     **** 			// und fr den Mittelwert aufsummieren
 486:ir_heat.c     ****    		last_interval = interval;
 2353               		adiw r30,1
 2354               		ldi r24,lo8(.LC20)
 2355 0ca6 8091 0000 		ldi r25,hi8(.LC20)
 2356 0caa 8A83      		std Z+1,r25
 487:ir_heat.c     ****    		//uint16_t temp;
 488:ir_heat.c     ****    		if(count<16) {
 2357               	bn	68,0,477,.LM205-.LFBB18
 2358               	.LM205:
 2359 0cac 8B81      		lds r24,off_counter
 2360 0cae 8031      		mov r18,r24
 2361 0cb0 00F4      		ldi r19,lo8(0)
 489:ir_heat.c     ****    			//temp = get_temperature(ADR_T_OBJ1);
 490:ir_heat.c     **** 	   		count++;
 2362               	24
 2364 0cb2 8B81      	.LM204:
 2365 0cb4 8F5F      		lds r24,mode
 2366 0cb6 8B83      		cpi r24,lo8(1)
 491:ir_heat.c     ****    			// Messwerte fr den Mittelwert aufsummieren
 492:ir_heat.c     ****    			temp_sum += get_temperature(ADR_T_OBJ1);
 2367               	 .L82
 2368               		ldi r24,lo8(3)
 2369 0cb8 87E0      		sts mode,r24
 2370 0cba 0E94 0000 	.L82:
 2372 0cc0 8885      	.LM205:
 2373 0cc2 9985      		lds r24,off_counter
 2374 0cc4 820F      		mov r18,r24
 2375 0cc6 931F      		ldi r19,lo8(0)
 2376 0cc8 9987      		rcall .
 2377 0cca 8887      		rcall .
 2378               		in r30,__SP_L__
 493:ir_heat.c     ****    			//printf("Raw: %i\n", temp);
 494:ir_heat.c     ****    		}
 495:ir_heat.c     ****    	}
 496:ir_heat.c     **** 
 497:ir_heat.c     **** 		// Je nach Mode Relais und LEDs setzen
 498:ir_heat.c     **** 		switch(mode) {
 2379               	204:
 2380               		lds r24,mode
 2381 0ccc 8091 0000 		cpi r24,lo8(1)
 2382 0cd0 282F      		brne .L82
 2383 0cd2 30E0      		ldi r24,lo8(3)
 2384 0cd4 3D87      		sts mode,r24
 2385 0cd6 2C87      	.L82:
 2387 0cda 9D85      	.LM205:
 2388 0cdc 8130      		lds r24,off_counter
 2389 0cde 9105      		mov r18,r24
 2390 0ce0 01F0      		ldi r19,lo8(0)
 2391 0ce2 2C85      		rcall .
 2392 0ce4 3D85      		rcall .
 2393 0ce6 2330      		in r30,__SP_L__
 2394 0ce8 3105      		in r31,__SP_H__
 2395 0cea 01F0      		adiw r30,1
 2396 0cec 8C85      		ldi r24,lo8(.LC20)
 2397 0cee 9D85      		ldi r25,hi8(.LC20)
 2398 0cf0 0097      		std Z+1,r25
 2399 0cf2 01F4      		st Z,r24
 2400               		std Z+3,r19
 499:ir_heat.c     **** 		case MODE_OFF:
 500:ir_heat.c     **** 			set_relais(0);
 2401               	8
 2402               	.LM205:
 2403 0cf4 80E0      		lds r24,off_counter
 2404 0cf6 0E94 0000 		mov r18,r24
 501:ir_heat.c     **** 			STATUS_LED1_ON;      // Grn
 2405               	sts off_counter,r24
 2407 0cfa ABE2      	.LM204:
 2408 0cfc B0E0      		lds r24,mode
 2409 0cfe EBE2      		cpi r24,lo8(1)
 2410 0d00 F0E0      		brne .L82
 2411 0d02 8081      		ldi r24,lo8(3)
 2412 0d04 8061      		sts mode,r24
 2413 0d06 8C93      	.L82:
 502:ir_heat.c     **** 			STATUS_LED2_OFF;
 2414               	8,0,477,.LM205-.LFBB18
 2415               	.LM205:
 2416 0d08 ABE2      		lds r24,off_counter
 2417 0d0a B0E0      		mov r18,r24
 2418 0d0c EBE2      		ldi r19,lo8(0)
 2419 0d0e F0E0      		rcall .
 2420 0d10 8081      		rcall .
 2421 0d12 877F      		in r30,__SP_L__
 2422 0d14 8C93      		in r31,__SP_H__
 2423 0d16 00C0      		adiw r30,1
 2424               		ldi r24,lo8(.LC20)
 503:ir_heat.c     **** 			break;
 504:ir_heat.c     **** 		case MODE_ON:
 505:ir_heat.c     **** 			set_relais(1);
 2425               	24,lo8(3)
 2426               		sts mode,r24
 2427 0d18 81E0      	.L82:
 506:ir_heat.c     **** 			STATUS_LED1_ON;     // Orange
 2429               	:
 2430               		lds r24,off_counter
 2431 0d1e ABE2      		subi r24,lo8(-(-1))
 2432 0d20 B0E0      		sts off_counter,r24
 2434 0d24 F0E0      	.LM204:
 2435 0d26 8081      		lds r24,mode
 2436 0d28 8061      		cpi r24,lo8(1)
 2437 0d2a 8C93      		brne .L82
 507:ir_heat.c     **** 			STATUS_LED2_ON;
 2438               	lo8(3)
 2439               		sts mode,r24
 2440 0d2c ABE2      	.L82:
 2442 0d30 EBE2      	.LM205:
 2443 0d32 F0E0      		lds r24,off_counter
 2444 0d34 8081      		mov r18,r24
 2445 0d36 8860      		ldi r19,lo8(0)
 2446 0d38 8C93      		rcall .
 2447 0d3a 00C0      		rcall .
 2448               		in r30,__SP_L__
 508:ir_heat.c     **** 			break;
 509:ir_heat.c     **** 		case MODE_TEMP_PROT:
 510:ir_heat.c     **** 			set_relais(0);
 2449               	204:
 2450               		lds r24,mode
 2451 0d3c 80E0      		cpi r24,lo8(1)
 2452 0d3e 0E94 0000 		brne .L82
 511:ir_heat.c     **** 			STATUS_LED1_OFF;
 2453               	4,off_counter
 2454               		tst r24
 2455 0d42 ABE2      		breq .L81
 2457 0d46 EBE2      	.LM203:
 2458 0d48 F0E0      		lds r24,off_counter
 2459 0d4a 8081      		subi r24,lo8(-(-1))
 2460 0d4c 8F7E      		sts off_counter,r24
 512:ir_heat.c     **** 			STATUS_LED2_ON;      // Rot
 2462               	lds r24,mode
 2463               		cpi r24,lo8(1)
 2464 0d50 ABE2      		brne .L82
 2465 0d52 B0E0      		ldi r24,lo8(3)
 2466 0d54 EBE2      		sts mode,r24
 2467 0d56 F0E0      	.L82:
 2469 0d5a 8860      	.LM205:
 2470 0d5c 8C93      		lds r24,off_counter
 513:ir_heat.c     **** 			slope = 0;
 2471               	4,lo8(-(-1))
 2472               		sts off_counter,r24
 2474 0d60 1E82      	.LM204:
 2475 0d62 00C0      		lds r24,mode
 2476               		cpi r24,lo8(1)
 514:ir_heat.c     **** 			break;
 515:ir_heat.c     **** 		default:
 516:ir_heat.c     **** 			mode = MODE_OFF;
 2477               	.L82
 2478               		ldi r24,lo8(3)
 2479 0d64 1092 0000 		sts mode,r24
 2480 0d68 00C0      	.L82:
 2482               	.LM205:
 2483               		lds r24,off_counter
 2484               		mov r18,r24
 2485               		ldi r19,lo8(0)
 2486               		rcall .
 2487               		rcall .
 2488               		in r30,__SP_L__
 2489               		in r31,__SP_H__
 2490               		adiw r30,1
 2491               		ldi r24,lo8(.LC20)
 2492               		ldi r25,hi8(.LC20)
 2493               		std Z+1,r25
 2494               		st Z,r24
 2495               		std Z+3,r19
 2496               		std Z+2,r18
 2497               		call printf
 2498               		pop __tmp_reg__
 2499               		pop __tmp_reg__
 2500               		pop __tmp_reg__
 2501               		pop __tmp_reg__
 2502               		rjmp .L84
 2503               	.L81:
 2505               	.LM206:
 2506               		lds r24,mode
 2507               		cpi r24,lo8(3)
 2508               		brne .L84
 2509               		sts mode,__zero_reg__
 2510               		rjmp .L84
 2511               	.L66:
 2513               	.LM207:
 2514               		lds r24,interval
 2515               		mov r18,r24
 2516               		clr r19
 2517               		sbrc r18,7
 2518               		com r19
 2519               		ldd r24,Y+2
 2520               		mov r24,r24
 2521               		ldi r25,lo8(0)
 2522               		cp r18,r24
 2523               		cpc r19,r25
DEFINED SYMBOLS
                            *ABS*:00000000 ir_heat.c
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:2      *ABS*:0000003f __SREG__
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:3      *ABS*:0000003e __SP_H__
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:4      *ABS*:0000003d __SP_L__
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:5      *ABS*:00000034 __CCP__
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:7      *ABS*:00000001 __zero_reg__
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:90     .data:00000000 interval
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:97     .bss:00000000 off_counter
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:103    .data:00000001 t_la_threshold_up
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:108    .data:00000003 t_abs_threshold_up
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:113    .data:00000005 t_la_threshold_down
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:118    .data:00000007 t_abs_threshold_down
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:124    .text:00000000 __vector_9
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:161    .text:0000002e __vector_13
                             .bss:00000001 c.1694
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:211    .text:00000068 __vector_16
                            *COM*:00000001 mode
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:341    .data:00000009 last_interval.1727
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:207    .bss:00000002 running.1726
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:356    .text:00000130 __vector_1
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:595    .text:00000292 __vector_18
                            *COM*:00000001 r_in
                            *COM*:00000020 rbuf
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:661    .text:000002ee __vector_19
                            *COM*:00000001 t_in
                            *COM*:00000001 t_out
                            *COM*:00000020 tbuf
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:740    .text:00000366 tbuflen
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:770    .text:00000382 UART_putchar
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:842    .text:000003e8 rbuflen
                            *COM*:00000001 r_out
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:871    .text:00000404 UART_getchar
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:930    .text:0000044e UART_first_init
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:992    .text:00000488 print_array
                            *COM*:0000000c t_array
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:1079   .text:00000500 add_value
                            *COM*:00000002 slope2
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:1235   .text:00000638 get_slope
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:1350   .text:000006fe lookahead_temp
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:1417   .text:00000760 get_temperature
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:343    .bss:00000003 last.1959
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:1547   .text:00000804 set_relais
C:\Users\Thorsten\AppData\Local\Temp/ccBeM6rH.s:1652   .text:00000866 main

UNDEFINED SYMBOLS
putchar
printf
puts
fdevopen
__divmodhi4
i2c_start
i2c_write
i2c_rep_start
i2c_read_ack
i2c_stop
__udivmodhi4
i2c_init
__do_copy_data
__do_clear_bss
